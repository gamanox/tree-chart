"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),OrgChart=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})};var i={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1},r=Object.assign(i,e);if(n.options=r,n.addEventListener("click",n._clickChart.bind(n)),r.pan&&r.chartContainer){document.querySelector(r.chartContainer).style.overflow="hidden",n.addEventListener("mousedown",n._onPanStart.bind(n)),n.addEventListener("touchstart",n._onPanStart.bind(n)),document.body.addEventListener("mouseup",n._onPanEnd.bind(n)),document.body.addEventListener("touchend",n._onPanEnd.bind(n))}if(r.zoom&&r.chartContainer){var s=document.querySelector(r.chartContainer);s.addEventListener("wheel",n._onWheeling.bind(n)),s.addEventListener("touchstart",n._onTouchStart.bind(n)),document.body.addEventListener("touchmove",n._onTouchMove.bind(n)),document.body.addEventListener("touchend",n._onTouchEnd.bind(n))}return n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this,t=this.options,n=t.data;if(this.setAttribute("class","orgchart"+(""!==t.chartClass?" "+t.chartClass:"")+("t2b"!==t.direction?" "+t.direction:"")),"object"===(void 0===n?"undefined":_typeof(n)))this.buildHierarchy(this,t.ajaxURL?n:this._attachRel(n,"00"),0);else if("string"==typeof n&&n.startsWith("#"))this.buildHierarchy(this,this._buildJsonDS(document.querySelector(n).children[0]),0);else{var i=document.createElement("i");i.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),this.appendChild(i),this._getJSON(n).then(function(n){e.buildHierarchy(e,t.ajaxURL?n:e._attachRel(n,"00"),0)}).catch(function(e){console.error("failed to fetch datasource for orgchart",e)}).finally(function(){var t=e.querySelector(".spinner");t.parentNode.removeChild(t)})}}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){}},{key:"_closest",value:function(e,t){return e&&(t(e)&&e!==this?e:this._closest(e.parentNode,t))}},{key:"_siblings",value:function(e,t){return Array.from(e.parentNode.children).filter(function(n){return n!==e&&(!t||e.matches(t))})}},{key:"_prevAll",value:function(e,t){for(var n=[],i=e.previousElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.previousElementSibling;return n}},{key:"_nextAll",value:function(e,t){for(var n=[],i=e.nextElementSibling;i;)t&&!i.matches(t)||n.push(i),i=i.nextElementSibling;return n}},{key:"_isVisible",value:function(e){return null!==e.offsetParent}},{key:"_addClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.add(t)}):e.classList.add(t)})}},{key:"_removeClass",value:function(e,t){e.forEach(function(e){t.indexOf(" ")>0?t.split(" ").forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t)})}},{key:"_css",value:function(e,t,n){e.forEach(function(e){e.style[t]=n})}},{key:"_removeAttr",value:function(e,t){e.forEach(function(e){e.removeAttribute(t)})}},{key:"_one",value:function(e,t,n,i){var r=function r(s){try{n.call(i,s)}finally{e.removeEventListener(t,r)}};e.addEventListener(t,r)}},{key:"_getDescElements",value:function(e,t){var n=[];return e.forEach(function(e){return n.push.apply(n,_toConsumableArray(e.querySelectorAll(t)))}),n}},{key:"_getJSON",value:function(e){return new Promise(function(t,n){function i(){4===this.readyState&&(200===this.status?t(JSON.parse(this.response)):n(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",e),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Content-Type","application/json"),r.send()})}},{key:"_buildJsonDS",value:function(e){var t=this,n={name:e.firstChild.textContent.trim(),relationship:("LI"===e.parentNode.parentNode.nodeName?"1":"0")+(e.parentNode.children.length>1?1:0)+(e.children.length?1:0)};return e.id&&(n.id=e.id),e.querySelector("ul")&&Array.from(e.querySelector("ul").children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._buildJsonDS(e))}),n}},{key:"_attachRel",value:function(e,t){if(e.relationship=t+(e.children&&e.children.length>0?1:0),e.children){var n=!0,i=!1,r=void 0;try{for(var s,o=e.children[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;this._attachRel(a,"1"+(e.children.length>1?1:0))}}catch(e){i=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}}return e}},{key:"_repaint",value:function(e){e&&(e.style.offsetWidth=e.offsetWidth)}},{key:"_isInAction",value:function(e){return e.querySelector(":scope > .edge").className.indexOf("fa-")>-1}},{key:"_getNodeState",value:function(e,t){var n=this,i=void 0,r={exist:!1,visible:!1};return"parent"===t?(i=this._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}),i&&(r.exist=!0),r.exist&&this._isVisible(i.parentNode.children[0])&&(r.visible=!0)):"children"===t?(i=this._closest(e,function(e){return"TR"===e.nodeName}).nextElementSibling,i&&(r.exist=!0),r.exist&&this._isVisible(i)&&(r.visible=!0)):"siblings"===t&&(i=this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode),i.length&&(r.exist=!0),r.exist&&i.some(function(e){return n._isVisible(e)})&&(r.visible=!0)),r}},{key:"getRelatedNodes",value:function(e,t){return"parent"===t?this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"):"children"===t?Array.from(this._closest(e,function(e){return"TABLE"===e.nodeName}).lastChild.children).map(function(e){return e.querySelector(".node")}):"siblings"===t?this._siblings(this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")}):[]}},{key:"_switchHorizontalArrow",value:function(e){var t=this.options,n=e.querySelector(".leftEdge"),i=e.querySelector(".rightEdge"),r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||this._closest(e,function(e){return e.classList.contains(".nodes")}).dataset.siblingsLoaded)){var s=r.previousElementSibling,o=r.nextElementSibling;s&&(s.classList.contains("hidden")?(n.classList.add("fa-chevron-left"),n.classList.remove("fa-chevron-right")):(n.classList.add("fa-chevron-right"),n.classList.remove("fa-chevron-left"))),o&&(o.classList.contains("hidden")?(i.classList.add("fa-chevron-right"),i.classList.remove("fa-chevron-left")):(i.classList.add("fa-chevron-left"),i.classList.remove("fa-chevron-right")))}else{var a=this._siblings(r),l=!!a.length&&!a.some(function(e){return e.classList.contains("hidden")});n.classList.toggle("fa-chevron-right",l),n.classList.toggle("fa-chevron-left",!l),i.classList.toggle("fa-chevron-left",l),i.classList.toggle("fa-chevron-right",!l)}}},{key:"_hoverNode",value:function(e){var t=e.target,n=!1,i=t.querySelector(":scope > .topEdge"),r=t.querySelector(":scope > .bottomEdge"),s=t.querySelector(":scope > .leftEdge");"mouseenter"===e.type?(i&&(n=this._getNodeState(t,"parent").visible,i.classList.toggle("fa-chevron-up",!n),i.classList.toggle("fa-chevron-down",n)),r&&(n=this._getNodeState(t,"children").visible,r.classList.toggle("fa-chevron-down",!n),r.classList.toggle("fa-chevron-up",n)),s&&this._switchHorizontalArrow(t)):Array.from(t.querySelectorAll(":scope > .edge")).forEach(function(e){e.classList.remove("fa-chevron-up","fa-chevron-down","fa-chevron-right","fa-chevron-left")})}},{key:"_clickNode",value:function(e){var t=e.currentTarget,n=this.querySelector(".focused");n&&n.classList.remove("focused"),t.classList.add("focused")}},{key:"_buildParentNode",value:function(e,t,n){var i=this,r=document.createElement("table");t.relationship="001",this._createNode(t,0).then(function(e){e.classList.remove("slide-up"),e.classList.add("slide-down");var t=document.createElement("tr"),s=document.createElement("tr"),o=document.createElement("tr"),a=document.createElement("tr");t.setAttribute("class","hidden"),t.innerHTML='<td colspan="2"></td>',r.appendChild(t),s.setAttribute("class","lines hidden"),s.innerHTML='<td colspan="2"><div class="downLine"></div></td>',r.appendChild(s),o.setAttribute("class","lines hidden"),o.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',r.appendChild(o),a.setAttribute("class","nodes"),a.innerHTML='<td colspan="2"></td>',r.appendChild(a),r.querySelector("td").appendChild(e),i.insertBefore(r,i.children[0]),r.children[3].children[0].appendChild(i.lastChild),n()}).catch(function(e){console.error("Failed to create parent node",e)})}},{key:"_switchVerticalArrow",value:function(e){e.classList.toggle("fa-chevron-up"),e.classList.toggle("fa-chevron-down")}},{key:"showParent",value:function(e){var t=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));this._removeClass(t,"hidden"),this._addClass(Array(t[0].children).slice(1,-1),"hidden");var n=t[2].querySelector(".node");this._one(n,"transitionend",function(){n.classList.remove("slide"),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(":scope > .topEdge"))},this),this._repaint(n),n.classList.add("slide"),n.classList.remove("slide-down")}},{key:"showSiblings",value:function(e,t){var n=this,i=[],r=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;i=t?"left"===t?this._prevAll(r):this._nextAll(r):this._siblings(r),this._removeClass(i,"hidden");var s=this._prevAll(this._closest(e,function(e){return e.classList.contains("nodes")}));if(r=Array.from(s[0].querySelectorAll(":scope > .hidden")),t?this._removeClass(r.slice(0,2*i.length),"hidden"):this._removeClass(r,"hidden"),!this._getNodeState(e,"parent").visible){this._removeClass(s,"hidden");var o=s[2].querySelector(".node");this._one(o,"transitionend",function(e){e.target.classList.remove("slide")},this),this._repaint(o),o.classList.add("slide"),o.classList.remove("slide-down")}i.forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&(e.classList.add("slide"),e.classList.remove("slide-left","slide-right"))})}),this._one(i[0].querySelector(".slide"),"transitionend",function(){var t=this;i.forEach(function(e){t._removeClass(Array.from(e.querySelectorAll(".slide")),"slide")}),this._isInAction(e)&&(this._switchHorizontalArrow(e),e.querySelector(".topEdge").classList.remove("fa-chevron-up"),e.querySelector(".topEdge").classList.add("fa-chevron-down"))},this)}},{key:"hideSiblings",value:function(e,t){var n=this,i=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode;(this._siblings(i).forEach(function(e){e.querySelector(".spinner")&&(n.dataset.inAjax=!1)}),!t||t&&"left"===t)&&this._prevAll(i).forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-right")})});if(!t||t&&"left"!==t){this._nextAll(i).forEach(function(e){Array.from(e.querySelectorAll(".node")).forEach(function(e){n._isVisible(e)&&e.classList.add("slide","slide-left")})})}var r=[];this._siblings(i).forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelectorAll(".slide")))});var s=[],o=!0,a=!1,l=void 0;try{for(var d,c=r[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var h=d.value,u=this._closest(h,function(e){return e.classList.contains("nodes")}).previousElementSibling;s.push(u),s.push(u.previousElementSibling)}}catch(e){a=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw l}}s=[].concat(_toConsumableArray(new Set(s))),s.forEach(function(e){e.style.visibility="hidden"}),this._one(r[0],"transitionend",function(n){var o=this;s.forEach(function(e){e.removeAttribute("style")});var a=[];a=t?"left"===t?this._prevAll(i,":not(.hidden)"):this._nextAll(i,":not(.hidden)"):this._siblings(i);var l=Array.from(this._closest(i,function(e){return e.classList.contains("nodes")}).previousElementSibling.querySelectorAll(":scope > :not(.hidden)")),d=l.slice(1,t?2*a.length+1:-1);this._addClass(d,"hidden"),this._removeClass(r,"slide"),a.forEach(function(e){Array.from(e.querySelectorAll(".node")).slice(1).forEach(function(e){o._isVisible(e)&&(e.classList.remove("slide-left","slide-right"),e.classList.add("slide-up"))})}),a.forEach(function(e){o._addClass(Array.from(e.querySelectorAll(".lines")),"hidden"),o._addClass(Array.from(e.querySelectorAll(".nodes")),"hidden"),o._addClass(Array.from(e.querySelectorAll(".verticalNodes")),"hidden")}),this._addClass(a,"hidden"),this._isInAction(e)&&this._switchHorizontalArrow(e)},this)}},{key:"hideParent",value:function(e){var t=Array.from(this._closest(e,function(e){return e.classList.contains("nodes")}).parentNode.children).slice(0,3);t[0].querySelector(".spinner")&&(this.dataset.inAjax=!1),this._getNodeState(e,"siblings").visible&&this.hideSiblings(e);var n=t.slice(1);this._css(n,"visibility","hidden");var i=t[0].querySelector(".node"),r=this._getNodeState(i,"parent").visible;i&&this._isVisible(i)&&(i.classList.add("slide","slide-down"),this._one(i,"transitionend",function(){i.classList.remove("slide"),this._removeAttr(n,"style"),this._addClass(t,"hidden")},this)),i&&r&&this.hideParent(i)}},{key:"addParent",value:function(e,t){var n=this;this._buildParentNode(e,t,function(){if(!e.querySelector(":scope > .topEdge")){var t=document.createElement("i");t.setAttribute("class","edge verticalEdge topEdge fa"),e.appendChild(t)}n.showParent(e)})}},{key:"_startLoading",value:function(e,t){this.options;if(void 0!==this.dataset.inAjax&&"true"===this.dataset.inAjax)return!1;e.classList.add("hidden");var n=document.createElement("i");return n.setAttribute("class","fa fa-circle-o-notch fa-spin spinner"),t.appendChild(n),this._addClass(Array.from(t.querySelectorAll(":scope > *:not(.spinner)")),"hazy"),this.dataset.inAjax=!0,!0}},{key:"_endLoading",value:function(e,t){this.options;e.classList.remove("hidden"),t.querySelector(":scope > .spinner").remove(),this._removeClass(Array.from(t.querySelectorAll(":scope > .hazy")),"hazy"),this.dataset.inAjax=!1}},{key:"_clickTopEdge",value:function(e){e.stopPropagation();var t=this,n=e.target,i=n.parentNode,r=this._getNodeState(i,"parent"),s=this.options;if(r.exist){var o=this._closest(i,function(e){return e.classList.contains("nodes")}),a=o.parentNode.firstChild.querySelector(".node");if(a.classList.contains("slide"))return;r.visible?(this.hideParent(i),this._one(a,"transitionend",function(){this._isInAction(i)&&(this._switchVerticalArrow(n),this._switchHorizontalArrow(i))},this)):this.showParent(i)}else{var l=n.parentNode.id;this._startLoading(n,i)&&this._getJSON("function"==typeof s.ajaxURL.parent?s.ajaxURL.parent(i.dataset.source):s.ajaxURL.parent+l).then(function(e){"true"===t.dataset.inAjax&&Object.keys(e).length&&t.addParent(i,e)}).catch(function(e){console.error("Failed to get parent node data.",e)}).finally(function(){t._endLoading(n,i)})}}},{key:"hideChildren",value:function(e){var t=this,n=this._nextAll(e.parentNode.parentNode),i=n[n.length-1],r=[];i.querySelector(".spinner")&&(this.dataset.inAjax=!1);var s=Array.from(i.querySelectorAll(".node")).filter(function(e){return t._isVisible(e)}),o=i.classList.contains("verticalNodes");o||(s.forEach(function(e){Array.prototype.push.apply(r,t._prevAll(t._closest(e,function(e){return e.classList.contains("nodes")}),".lines"))}),r=[].concat(_toConsumableArray(new Set(r))),this._css(r,"visibility","hidden")),this._one(s[0],"transitionend",function(a){this._removeClass(s,"slide"),o?t._addClass(n,"hidden"):(r.forEach(function(e){e.removeAttribute("style"),e.classList.add("hidden"),e.parentNode.lastChild.classList.add("hidden")}),this._addClass(Array.from(i.querySelectorAll(".verticalNodes")),"hidden")),this._isInAction(e)&&this._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(s,"slide slide-up")}},{key:"showChildren",value:function(e){var t=this,n=this,i=this._nextAll(e.parentNode.parentNode),r=[];this._removeClass(i,"hidden"),i.some(function(e){return e.classList.contains("verticalNodes")})?i.forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}):Array.from(i[2].children).forEach(function(e){Array.prototype.push.apply(r,Array.from(e.querySelector("tr").querySelectorAll(".node")).filter(function(e){return n._isVisible(e)}))}),this._repaint(r[0]),this._one(r[0],"transitionend",function(n){t._removeClass(r,"slide"),t._isInAction(e)&&t._switchVerticalArrow(e.querySelector(".bottomEdge"))},this),this._addClass(r,"slide"),this._removeClass(r,"slide-up")}},{key:"_buildChildNode",value:function(e,t,n){var i=t.children||t.siblings;e.querySelector("td").setAttribute("colSpan",2*i.length),this.buildHierarchy(e,{children:i},0,n)}},{key:"addChildren",value:function(e,t){var n=this,i=this.options,r=0;this.dataset.inEdit="addChildren",this._buildChildNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(++r===t.children.length){if(!e.querySelector(".bottomEdge")){var s=document.createElement("i");s.setAttribute("class","edge verticalEdge bottomEdge fa"),e.appendChild(s)}if(!e.querySelector(".symbol")){var o=document.createElement("i");o.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),e.querySelector(":scope > .title").appendChild(o)}n.showChildren(e),n.dataset.inEdit=""}})}},{key:"_clickBottomEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,o=this._getNodeState(s,"children");if(o.exist){var a=this._closest(s,function(e){return"TR"===e.nodeName}).parentNode.lastChild;if(Array.from(a.querySelectorAll(".node")).some(function(e){return t._isVisible(e)&&e.classList.contains("slide")}))return;o.visible?this.hideChildren(s):this.showChildren(s)}else{var l=r.parentNode.id;this._startLoading(r,s)&&this._getJSON("function"==typeof i.ajaxURL.children?i.ajaxURL.children(s.dataset.source):i.ajaxURL.children+l).then(function(e){"true"===n.dataset.inAjax&&e.children.length&&n.addChildren(s,e)}).catch(function(e){console.error("Failed to get children nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_complementLine",value:function(e,t,n){var i=e.parentNode.parentNode.children;i[0].children[0].setAttribute("colspan",2*t),i[1].children[0].setAttribute("colspan",2*t);for(var r=0;r<n;r++){var s=document.createElement("td"),o=document.createElement("td");s.setAttribute("class","rightLine topLine"),s.innerHTML="&nbsp;",i[2].insertBefore(s,i[2].children[1]),o.setAttribute("class","leftLine topLine"),o.innerHTML="&nbsp;",i[2].insertBefore(o,i[2].children[1])}}},{key:"_buildSiblingNode",value:function(e,t,n){var i=this,r=this,s=t.siblings?t.siblings.length:t.children.length,o="TD"===e.parentNode.nodeName?this._closest(e,function(e){return"TR"===e.nodeName}).children.length:1,a=o+s,l=a>1?Math.floor(a/2-1):0;if("TD"===e.parentNode.nodeName){var d=this._prevAll(e.parentNode.parentNode);d[0].remove(),d[1].remove();var c=0;r._buildChildNode.call(r,r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}),t,function(){if(++c===s){var t=Array.from(r._closest(e.parentNode,function(e){return"TABLE"===e.nodeName}).lastChild.children);if(o>1){var i=e.parentNode.parentNode;Array.from(i.children).forEach(function(e){t[0].parentNode.insertBefore(e,t[0])}),i.remove(),r._complementLine(t[0],a,o),r._addClass(t,"hidden"),t.forEach(function(e){r._addClass(e.querySelectorAll(".node"),"slide-left")})}else{var d=e.parentNode.parentNode;t[l].parentNode.insertBefore(e.parentNode,t[l+1]),d.remove(),r._complementLine(t[l],a,1),r._addClass(t,"hidden"),r._addClass(r._getDescElements(t.slice(0,l+1),".node"),"slide-right"),r._addClass(r._getDescElements(t.slice(l+1),".node"),"slide-left")}n()}})}else{var h=0;r.buildHierarchy.call(r,r,t,0,function(){if(++h===a){var t=e.nextElementSibling.children[3].children[l],s=document.createElement("td");s.setAttribute("colspan",2),s.appendChild(e),t.parentNode.insertBefore(s,t.nextElementSibling),r._complementLine(t,a,1);var o=r._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0];o.classList.add("hidden"),r._addClass(Array.from(o.querySelectorAll(".node")),"slide-down");var d=i._siblings(e.parentNode);r._addClass(d,"hidden"),r._addClass(r._getDescElements(d.slice(0,l),".node"),"slide-right"),r._addClass(r._getDescElements(d.slice(l),".node"),"slide-left"),n()}})}}},{key:"addSiblings",value:function(e,t){var n=this;this.dataset.inEdit="addSiblings",this._buildSiblingNode.call(this,this._closest(e,function(e){return"TABLE"===e.nodeName}),t,function(){if(n._closest(e,function(e){return e.classList&&e.classList.contains("nodes")}).dataset.siblingsLoaded=!0,!e.querySelector(".leftEdge")){var t=document.createElement("i"),i=document.createElement("i");t.setAttribute("class","edge horizontalEdge rightEdge fa"),e.appendChild(t),i.setAttribute("class","edge horizontalEdge leftEdge fa"),e.appendChild(i)}n.showSiblings(e),n.dataset.inEdit=""})}},{key:"removeNodes",value:function(e){var t=this._closest(e,function(e){return"TABLE"===e.nodeName}).parentNode,n=this._siblings(t.parentNode);"TD"===t.nodeName?this._getNodeState(e,"siblings").exist?(n[2].querySelector(".topLine").nextElementSibling.remove(),n[2].querySelector(".topLine").remove(),n[0].children[0].setAttribute("colspan",n[2].children.length),n[1].children[0].setAttribute("colspan",n[2].children.length),t.remove()):(n[0].children[0].removeAttribute("colspan"),n[0].querySelector(".bottomEdge").remove(),this._siblings(n[0]).forEach(function(e){return e.remove()})):Array.from(t.parentNode.children).forEach(function(e){return e.remove()})}},{key:"_clickHorizontalEdge",value:function(e){var t=this;e.stopPropagation();var n=this,i=this.options,r=e.target,s=r.parentNode,o=this._getNodeState(s,"siblings");if(o.exist){var a=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode;if(this._siblings(a).some(function(e){var n=e.querySelector(".node");return t._isVisible(n)&&n.classList.contains("slide")}))return;if(i.toggleSiblingsResp){var l=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.previousElementSibling,d=this._closest(s,function(e){return"TABLE"===e.nodeName}).parentNode.nextElementSibling;r.classList.contains("leftEdge")?l.classList.contains("hidden")?this.showSiblings(s,"left"):this.hideSiblings(s,"left"):d.classList.contains("hidden")?this.showSiblings(s,"right"):this.hideSiblings(s,"right")}else o.visible?this.hideSiblings(s):this.showSiblings(s)}else{var c=r.parentNode.id,h=this._getNodeState(s,"parent").exist?"function"==typeof i.ajaxURL.siblings?i.ajaxURL.siblings(JSON.parse(s.dataset.source)):i.ajaxURL.siblings+c:"function"==typeof i.ajaxURL.families?i.ajaxURL.families(JSON.parse(s.dataset.source)):i.ajaxURL.families+c;this._startLoading(r,s)&&this._getJSON(h).then(function(e){"true"===n.dataset.inAjax&&(e.siblings||e.children)&&n.addSiblings(s,e)}).catch(function(e){console.error("Failed to get sibling nodes data",e)}).finally(function(){n._endLoading(r,s)})}}},{key:"_clickToggleButton",value:function(e){var t=this,n=e.target,i=n.parentNode.nextElementSibling,r=Array.from(i.querySelectorAll(".node")),s=Array.from(i.children).map(function(e){return e.querySelector(".node")});s.some(function(e){return e.classList.contains("slide")})||(n.classList.toggle("fa-plus-square"),n.classList.toggle("fa-minus-square"),r[0].classList.contains("slide-up")?(i.classList.remove("hidden"),this._repaint(s[0]),this._addClass(s,"slide"),this._removeClass(s,"slide-up"),this._one(s[0],"transitionend",function(){t._removeClass(s,"slide")})):(this._addClass(r,"slide slide-up"),this._one(r[0],"transitionend",function(){t._removeClass(r,"slide"),r.forEach(function(e){t._closest(e,function(e){return"UL"===e.nodeName}).classList.add("hidden")})}),r.forEach(function(e){var n=Array.from(e.querySelectorAll(".toggleBtn"));t._removeClass(n,"fa-minus-square"),t._addClass(n,"fa-plus-square")})))}},{key:"_dispatchClickEvent",value:function(e){var t=e.target.classList;t.contains("topEdge")?this._clickTopEdge(e):t.contains("rightEdge")||t.contains("leftEdge")?this._clickHorizontalEdge(e):t.contains("bottomEdge")?this._clickBottomEdge(e):t.contains("toggleBtn")?this._clickToggleButton(e):this._clickNode(e)}},{key:"_onDragStart",value:function(e){var t=e.target,n=this.options,i=/firefox/.test(window.navigator.userAgent.toLowerCase());if(i&&e.dataTransfer.setData("text/html","hack for firefox"),this.style.transform){var r=void 0,s=void 0;document.querySelector(".ghost-node")?(r=this.querySelector(":scope > .ghost-node"),s=r.children[0]):(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.classList.add("ghost-node"),s=document.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(s),this.appendChild(r));var o=this.style.transform.split(","),a=Math.abs(window.parseFloat("t2b"===n.direction||"b2t"===n.direction?o[0].slice(o[0].indexOf("(")+1):o[1]));r.setAttribute("width",t.offsetWidth),r.setAttribute("height",t.offsetHeight),s.setAttribute("x",5*a),s.setAttribute("y",5*a),s.setAttribute("width",120*a),s.setAttribute("height",40*a),s.setAttribute("rx",4*a),s.setAttribute("ry",4*a),s.setAttribute("stroke-width",1*a);var l=e.offsetX*a,d=e.offsetY*a;if("l2r"===n.direction?(l=e.offsetY*a,d=e.offsetX*a):"r2l"===n.direction?(l=t.offsetWidth-e.offsetY*a,d=e.offsetX*a):"b2t"===n.direction&&(l=t.offsetWidth-e.offsetX*a,d=t.offsetHeight-e.offsetY*a),i){var c=document.createElement("img");c.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),e.dataTransfer.setDragImage(c,l,d),s.setAttribute("fill","rgb(255, 255, 255)"),s.setAttribute("stroke","rgb(191, 0, 0)")}else e.dataTransfer.setDragImage(r,l,d)}var h=e.target,u=this._closest(h,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].querySelector(".node"),f=Array.from(this._closest(h,function(e){return"TABLE"===e.nodeName}).querySelectorAll(".node"));this.dragged=h,Array.from(this.querySelectorAll(".node")).forEach(function(e){f.includes(e)||(n.dropCriteria?n.dropCriteria(h,u,e)&&e.classList.add("allowedDrop"):e.classList.add("allowedDrop"))})}},{key:"_onDragOver",value:function(e){e.preventDefault(),e.currentTarget.classList.contains("allowedDrop")||(e.dataTransfer.dropEffect="none")}},{key:"_onDragEnd",value:function(e){Array.from(this.querySelectorAll(".allowedDrop")).forEach(function(e){e.classList.remove("allowedDrop")})}},{key:"_onDrop",value:function(e){var t=e.currentTarget,n=this.dragged,i=this._closest(n,function(e){return e.classList&&e.classList.contains("nodes")}).parentNode.children[0].children[0];if(this._removeClass(Array.from(this.querySelectorAll(".allowedDrop")),"allowedDrop"),t.parentNode.parentNode.nextElementSibling){var r=window.parseInt(t.parentNode.colSpan)+2;if(t.parentNode.setAttribute("colspan",r),t.parentNode.parentNode.nextElementSibling.children[0].setAttribute("colspan",r),!n.querySelector(".horizontalEdge")){var s=document.createElement("i"),o=document.createElement("i");s.setAttribute("class","edge horizontalEdge rightEdge fa"),n.appendChild(s),o.setAttribute("class","edge horizontalEdge leftEdge fa"),n.appendChild(o)}var a=t.parentNode.parentNode.nextElementSibling.nextElementSibling,l=document.createElement("td"),d=document.createElement("td");l.setAttribute("class","leftLine topLine"),l.innerHTML="&nbsp;",a.insertBefore(l,a.children[1]),d.setAttribute("class","rightLine topLine"),d.innerHTML="&nbsp;",a.insertBefore(d,a.children[2]),a.nextElementSibling.appendChild(this._closest(n,function(e){return"TABLE"===e.nodeName}).parentNode);var c=this._siblings(this._closest(n,function(e){return"TABLE"===e.nodeName}).parentNode).map(function(e){return e.querySelector(".node")});if(1===c.length){var h=document.createElement("i"),u=document.createElement("i");h.setAttribute("class","edge horizontalEdge rightEdge fa"),c[0].appendChild(h),u.setAttribute("class","edge horizontalEdge leftEdge fa"),c[0].appendChild(u)}}else{var f=document.createElement("i");f.setAttribute("class","edge verticalEdge bottomEdge fa"),t.appendChild(f),t.parentNode.setAttribute("colspan",2);var p=this._closest(t,function(e){return"TABLE"===e.nodeName}),v=document.createElement("tr"),g=document.createElement("tr"),m=document.createElement("tr");v.setAttribute("class","lines"),v.innerHTML='<td colspan="2"><div class="downLine"></div></td>',p.appendChild(v),g.setAttribute("class","lines"),g.innerHTML='<td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td>',p.appendChild(g),m.setAttribute("class","nodes"),p.appendChild(m),Array.from(n.querySelectorAll(".horizontalEdge")).forEach(function(e){n.removeChild(e)});var y=this._closest(n,function(e){return"TABLE"===e.nodeName}).parentNode;m.appendChild(y)}var b=window.parseInt(i.colSpan);if(b>2){i.setAttribute("colspan",b-2),i.parentNode.nextElementSibling.children[0].setAttribute("colspan",b-2);var _=i.parentNode.nextElementSibling.nextElementSibling;_.children[1].remove(),_.children[1].remove();var E=Array.from(i.parentNode.parentNode.children[3].children).map(function(e){return e.querySelector(".node")});1===E.length&&(E[0].querySelector(".leftEdge").remove(),E[0].querySelector(".rightEdge").remove())}else i.removeAttribute("colspan"),i.querySelector(".node").removeChild(i.querySelector(".bottomEdge")),Array.from(i.parentNode.parentNode.children).slice(1).forEach(function(e){return e.remove()});var L=new CustomEvent("nodedropped.orgchart",{detail:{draggedNode:n,dragZone:i.children[0],dropZone:t}});this.dispatchEvent(L)}},{key:"_createNode",value:function(e,t){var n=this,i=this.options;return new Promise(function(r,s){if(e.children){var o=!0,a=!1,l=void 0;try{for(var d,c=e.children[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){d.value.parentId=e.id}}catch(e){a=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw l}}}var h=document.createElement("div");delete e.children,h.dataset.source=JSON.stringify(e),e[i.nodeId]&&(h.id=e[i.nodeId]);var u=n.dataset.inEdit,f=void 0;f=u?"addChildren"===u?" slide-up":"":t>=i.depth?" slide-up":"",h.setAttribute("class","node "+(e.className||"")+f),i.draggable&&h.setAttribute("draggable",!0),e.parentId&&h.setAttribute("data-parent",e.parentId),h.innerHTML='\n        <div class="title">'+e[i.nodeTitle]+"</div>\n        "+(i.nodeContent?'<div class="content">'+e[i.nodeContent]+"</div>":"")+"\n      ";var p=e.relationship||"";if(i.verticalDepth&&t+2>i.verticalDepth){if(t+1>=i.verticalDepth&&Number(p.substr(2,1))){var v=document.createElement("i"),g=t+1>=i.depth?"plus":"minus";v.setAttribute("class","toggleBtn fa fa-"+g+"-square"),
h.appendChild(v)}}else{if(Number(p.substr(0,1))){var m=document.createElement("i");m.setAttribute("class","edge verticalEdge topEdge fa"),h.appendChild(m)}if(Number(p.substr(1,1))){var y=document.createElement("i"),b=document.createElement("i");y.setAttribute("class","edge horizontalEdge rightEdge fa"),h.appendChild(y),b.setAttribute("class","edge horizontalEdge leftEdge fa"),h.appendChild(b)}if(Number(p.substr(2,1))){var _=document.createElement("i"),E=document.createElement("i"),L=h.querySelector(":scope > .title");_.setAttribute("class","edge verticalEdge bottomEdge fa"),h.appendChild(_),E.setAttribute("class","fa "+i.parentNodeSymbol+" symbol"),L.insertBefore(E,L.children[0])}}h.addEventListener("mouseenter",n._hoverNode.bind(n)),h.addEventListener("mouseleave",n._hoverNode.bind(n)),h.addEventListener("click",n._dispatchClickEvent.bind(n)),i.draggable&&(h.addEventListener("dragstart",n._onDragStart.bind(n)),h.addEventListener("dragover",n._onDragOver.bind(n)),h.addEventListener("dragend",n._onDragEnd.bind(n)),h.addEventListener("drop",n._onDrop.bind(n))),i.createNode&&i.createNode(h,e),r(h)})}},{key:"buildHierarchy",value:function(e,t,n,i){var r=this,s=this.options,o=void 0,a=t.children,l=s.verticalDepth&&n+1>=s.verticalDepth;if(Object.keys(t).length>1&&(o=l?e:document.createElement("table"),l||e.appendChild(o),this._createNode(t,n).then(function(e){if(l)o.insertBefore(e,o.firstChild);else{var t=document.createElement("tr");t.innerHTML="\n            <td "+(a?'colspan="'+2*a.length+'"':"")+">\n            </td>\n          ",t.children[0].appendChild(e),o.insertBefore(t,o.children[0]?o.children[0]:null)}i&&i()}).catch(function(e){console.error("Failed to creat node",e)})),a){1===Object.keys(t).length&&(o=e);var d=void 0,c=s.verticalDepth&&n+2>=s.verticalDepth,h=r.dataset.inEdit;if(d=h?"addSiblings"===h?"":" hidden":n+1>=s.depth?" hidden":"",!c){var u=document.createElement("tr");u.setAttribute("class","lines"+d),u.innerHTML='\n          <td colspan="'+2*a.length+'">\n            <div class="downLine"></div>\n          </td>\n        ',o.appendChild(u)}var f=document.createElement("tr");f.setAttribute("class","lines"+d),f.innerHTML='\n        <td class="rightLine">&nbsp;</td>\n        '+a.slice(1).map(function(){return'\n          <td class="leftLine topLine">&nbsp;</td>\n          <td class="rightLine topLine">&nbsp;</td>\n          '}).join("")+'\n        <td class="leftLine">&nbsp;</td>\n      ';var p=void 0;if(c)if(p=document.createElement("ul"),d&&p.classList.add(d.trim()),n+2===s.verticalDepth){var v=document.createElement("tr");v.setAttribute("class","verticalNodes"+d),v.innerHTML="<td></td>",v.firstChild.appendChild(p),o.appendChild(v)}else o.appendChild(p);else p=document.createElement("tr"),p.setAttribute("class","nodes"+d),o.appendChild(f),o.appendChild(p);a.forEach(function(e){var t=void 0;c?t=document.createElement("li"):(t=document.createElement("td"),t.setAttribute("colspan",2)),p.appendChild(t),r.buildHierarchy(t,e,n+1,i)})}}},{key:"_clickChart",value:function(e){!this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})&&this.querySelector(".node.focused")&&this.querySelector(".node.focused").classList.remove("focused")}},{key:"_loopChart",value:function(e){var t=this,n={id:e.querySelector(".node").id};return e.children[3]&&Array.from(e.children[3].children).forEach(function(e){n.children||(n.children=[]),n.children.push(t._loopChart(e.firstChild))}),n}},{key:"getHierarchy",value:function(){return this.querySelector(".node").id?this._loopChart(this.querySelector("table")):"Error: Nodes of orghcart to be exported must have id attribute!"}},{key:"_onPanStart",value:function(e){var t=e.currentTarget;if(this._closest(e.target,function(e){return e.classList&&e.classList.contains("node")})||e.touches&&e.touches.length>1)return void(t.dataset.panning=!1);t.style.cursor="move",t.dataset.panning=!0;var n=0,i=0,r=window.getComputedStyle(t).transform;if("none"!==r){var s=r.split(",");r.includes("3d")?(n=Number.parseInt(s[12],10),i=Number.parseInt(s[13],10)):(n=Number.parseInt(s[4],10),i=Number.parseInt(s[5],10))}var o=0,a=0;if(e.targetTouches){if(1===e.targetTouches.length)o=e.targetTouches[0].pageX-n,a=e.targetTouches[0].pageY-i;else if(e.targetTouches.length>1)return}else o=e.pageX-n,a=e.pageY-i;t.dataset.panStart=JSON.stringify({startX:o,startY:a}),t.addEventListener("mousemove",this._onPanning.bind(this)),t.addEventListener("touchmove",this._onPanning.bind(this))}},{key:"_onPanning",value:function(e){var t=e.currentTarget;if("false"!==t.dataset.panning){var n=0,i=0,r=JSON.parse(t.dataset.panStart),s=r.startX,o=r.startY;if(e.targetTouches){if(1===e.targetTouches.length)n=e.targetTouches[0].pageX-s,i=e.targetTouches[0].pageY-o;else if(e.targetTouches.length>1)return}else n=e.pageX-s,i=e.pageY-o;var a=window.getComputedStyle(t).transform;if("none"===a)a.includes("3d")?t.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+i+", 0, 1)":t.style.transform="matrix(1, 0, 0, 1, "+n+", "+i+")";else{var l=a.split(",");a.includes("3d")?(l[12]=n,l[13]=i):(l[4]=n,l[5]=i+")"),t.style.transform=l.join(",")}}}},{key:"_onPanEnd",value:function(e){"true"===this.dataset.panning&&(this.dataset.panning=!1,this.style.cursor="default",document.body.removeEventListener("mousemove",this._onPanning),document.body.removeEventListener("touchmove",this._onPanning))}},{key:"_setChartScale",value:function(e,t){var n=window.getComputedStyle(e).transform;if("none"===n)e.style.transform="scale("+t+","+t+")";else{var i=n.split(",");n.includes("3d")?e.style.transform=n+" scale3d("+t+","+t+", 1)":(i[0]="matrix("+t,i[3]=t,e.style.transform=n+" scale("+t+","+t+")")}e.dataset.scale=t}},{key:"_onWheeling",value:function(e){e.preventDefault();var t=e.deltaY>0?.8:1.2;this._setChartScale(this,t)}},{key:"_getPinchDist",value:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))}},{key:"_onTouchStart",value:function(e){if(e.touches&&2===e.touches.length){var t=this._getPinchDist(e);this.dataset.pinching=!0,this.dataset.pinchDistStart=t}}},{key:"_onTouchMove",value:function(e){if(this.dataset.pinching){var t=this._getPinchDist(e);this.dataset.pinchDistEnd=t}}},{key:"_onTouchEnd",value:function(e){if(this.dataset.pinching){this.dataset.pinching=!1;var t=this.dataset.pinchDistEnd-this.dataset.pinchDistStart;t>0?this._setChartScale(this,1):t<0&&this._setChartScale(this,-1)}}}]),t}(HTMLElement);exports.default=OrgChart,window.customElements.define("org-chart",OrgChart);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZ2NoYXJ0LXdlYmNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsiT3JnQ2hhcnQiLCJvcHRpb25zIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImNhbGwiLCJQcm9taXNlIiwicHJvdG90eXBlIiwiZmluYWxseSIsImNhbGxiYWNrIiwiUCIsImNvbnN0cnVjdG9yIiwidGhlbiIsInZhbHVlIiwicmVzb2x2ZSIsInJlYXNvbiIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJvcHRzIiwiYXNzaWduIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jbGlja0NoYXJ0IiwiYmluZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNoYXJ0Q29udGFpbmVyIiwic3R5bGUiLCJvdmVyZmxvdyIsIl9vblBhblN0YXJ0IiwiYm9keSIsIl9vblBhbkVuZCIsInRoYXQiLCJfb25XaGVlbGluZyIsIl9vblRvdWNoU3RhcnQiLCJfb25Ub3VjaE1vdmUiLCJfb25Ub3VjaEVuZCIsImRhdGEiLCJzZXRBdHRyaWJ1dGUiLCJfdHlwZW9mIiwiYWpheFVSTCIsIl9hdHRhY2hSZWwiLCJzdGFydHNXaXRoIiwiY2hpbGRyZW4iLCJzcGlubmVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiYnVpbGRIaWVyYXJjaHkiLCJyZXNwIiwiY2F0Y2giLCJjb25zb2xlIiwib2xkVmFsIiwibmV3VmFsIiwiZWwiLCJmbiIsIl9jbG9zZXN0IiwicGFyZW50Tm9kZSIsImV4cHIiLCJBcnJheSIsImZyb20iLCJmaWx0ZXIiLCJjaGlsZCIsIm1hdGNoZXMiLCJwcmV2U2liIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInJlbW92ZUNoaWxkIiwic2licyIsInB1c2giLCJuZXh0U2liIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZWxlbWVudHMiLCJjbGFzc05hbWVzIiwiZm9yRWFjaCIsImluZGV4T2YiLCJzcGxpdCIsImNsYXNzTmFtZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInByb3AiLCJ2YWwiLCJhdHRyIiwicmVtb3ZlQXR0cmlidXRlIiwic2VsZiIsIm9uZSIsImV2ZW50IiwibGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidHlwZSIsIm9mZnNldFBhcmVudCIsImFuY2VzdG9ycyIsInNlbGVjdG9yIiwicmVzdWx0cyIsImFwcGx5IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwicXVlcnlTZWxlY3RvckFsbCIsInVybCIsInJlamVjdCIsImhhbmRsZXIiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwic3RhdHVzVGV4dCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwibGkiLCJfdGhpczIiLCJ0ZXh0Q29udGVudCIsInRyaW0iLCJyZWxhdGlvbnNoaXAiLCJub2RlTmFtZSIsImxlbmd0aCIsImlkIiwic3ViT2JqIiwiX2J1aWxkSnNvbkRTIiwiZmxhZ3MiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsIml0ZW0iLCJlcnIiLCJyZXR1cm4iLCJub2RlIiwib2Zmc2V0V2lkdGgiLCJyZWxhdGlvbiIsIl90aGlzMyIsImNyaXRlcmlhIiwic3RhdGUiLCJjb250YWlucyIsImV4aXN0IiwiX2lzVmlzaWJsZSIsInJlc3BvbnNlIiwidmlzaWJsZSIsIl9zaWJsaW5ncyIsInNvbWUiLCJsYXN0Q2hpbGQiLCJtYXAiLCJyaWdodEVkZ2UiLCJ0ZW1wIiwiZGF0YXNldCIsInNpYmxpbmdzTG9hZGVkIiwibGVmdEVkZ2UiLCJzaWJzVmlzaWJsZSIsInRvZ2dsZSIsInRhcmdldCIsImZsYWciLCJ0b3BFZGdlIiwiYm90dG9tRWRnZSIsIl9nZXROb2RlU3RhdGUiLCJfc3dpdGNoSG9yaXpvbnRhbEFycm93IiwiY2xpY2tlZE5vZGUiLCJmb2N1c2VkTm9kZSIsIm5vZGVEYXRhIiwidGFibGUiLCJfY3JlYXRlTm9kZSIsIm5vZGVEaXYiLCJwYXJlbnRUciIsInN1cGVyaW9yTGluZSIsImluZmVyaW9yTGluZSIsImNoaWxkcmVuVHIiLCJpbm5lckhUTUwiLCJpbnNlcnRCZWZvcmUiLCJhcnJvdyIsIl9yZW1vdmVDbGFzcyIsInNsaWNlIiwicGFyZW50IiwiX3N3aXRjaFZlcnRpY2FsQXJyb3ciLCJfdGhpczQiLCJzaWJsaW5ncyIsIl9wcmV2QWxsIiwiX25leHRBbGwiLCJ1cHBlckxldmVsIiwiX29uZSIsInNpYiIsIl90aGlzNSIsIl9pc0luQWN0aW9uIiwiX3RoaXM2Iiwibm9kZUNvbnRhaW5lciIsImluQWpheCIsImN1cnJlbnRSb290IiwiYW5pbWF0ZWROb2RlcyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwibGluZXMiLCJlcnJvciIsIl9pdGVyYXRvcjIiLCJTZXQiLCJsaW5lIiwidmlzaWJpbGl0eSIsIl90aGlzNyIsIl9hZGRDbGFzcyIsIl9yZXBhaW50IiwiaGlkZVNpYmxpbmdzIiwiX2NzcyIsImdyYW5kZmF0aGVyVmlzaWJsZSIsIl9idWlsZFBhcmVudE5vZGUiLCJwcmVTaWJzIiwic3RvcFByb3BhZ2F0aW9uIiwibmV4dFNpYnMiLCJmaXJzdENoaWxkIiwicGFyZW50U3RhdGUiLCJzaG93UGFyZW50IiwiX3N0YXJ0TG9hZGluZyIsInNvdXJjZSIsImtleXMiLCJhZGRQYXJlbnQiLCJfZW5kTG9hZGluZyIsImxhc3RJdGVtIiwiZGVzY2VuZGFudHMiLCJpc1ZlcnRpY2FsRGVzYyIsInNvbWVMaW5lcyIsIl90aGlzOCIsImFwcGVuZFRvIiwiY291bnQiLCJpbkVkaXQiLCJfYnVpbGRDaGlsZE5vZGUiLCJzeW1ib2wiLCJzaG93Q2hpbGRyZW4iLCJfdGhpczkiLCJjaGlsZHJlblN0YXRlIiwiaGlkZUNoaWxkcmVuIiwiYWRkQ2hpbGRyZW4iLCJleGlzdGluZ1NpYmxpZ0NvdW50Iiwib25lU2libGluZyIsInNpYmxpbmdDb3VudCIsImkiLCJyaWdodExpbmUiLCJsZWZ0TGluZSIsImhpZGVQYXJlbnQiLCJfdGhpczEwIiwibmV3U2libGluZ0NvdW50Iiwibm9kZUNoYXJ0IiwiaW5zZXJ0UG9zdGlvbiIsImZsb29yIiwiY2hpbGRDb3VudCIsInNpYmxpbmdUZHMiLCJfY29tcGxlbWVudExpbmUiLCJfZ2V0RGVzY0VsZW1lbnRzIiwibm9kZUNvdW50IiwidGQiLCJ0ZW1wMiIsInRlbXAzIiwiX2J1aWxkU2libGluZ05vZGUiLCJzaG93U2libGluZ3MiLCJfdGhpczExIiwiaEVkZ2UiLCJzaWJsaW5nc1N0YXRlIiwiZmFtaWxpZXMiLCJfZ2V0SlNPTiIsImRlc2NXcmFwcGVyIiwidG9nZ2xlQnRuIiwiZGVzYyIsInN1YlRCcyIsIl9jbGlja1RvcEVkZ2UiLCJfY2xpY2tIb3Jpem9udGFsRWRnZSIsIl9jbGlja1RvZ2dsZUJ1dHRvbiIsImlzRmlyZWZveCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiZGF0YVRyYW5zZmVyIiwiZ2hvc3ROb2RlIiwibm9kZUNvdmVyIiwic2NhbGUiLCJ4T2Zmc2V0Iiwib2Zmc2V0WCIsInlPZmZzZXQiLCJvZmZzZXRZIiwiZ2hvc3ROb2RlV3JhcHBlciIsInNyYyIsIlhNTFNlcmlhbGl6ZXIiLCJzZXJpYWxpemVUb1N0cmluZyIsInNldERyYWdJbWFnZSIsImRyYWdnZWQiLCJkcmFnWm9uZSIsImRyYWdIaWVyIiwiaW5jbHVkZXMiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJlbnRUYXJnZXQiLCJkcm9wRWZmZWN0IiwiZHJvcFpvbmUiLCJkcm9wQ29sc3BhbiIsInBhcnNlSW50IiwiY29sU3BhbiIsImxlZnRsaW5lIiwicmlnaHRsaW5lIiwiZHJvcFNpYnMiLCJ1cHBlclRyIiwibG93ZXJUciIsIm5vZGVUciIsImRyYWdDb2xTcGFuIiwiZHJhZ1NpYnMiLCJ0ciIsImN1c3RvbUUiLCJkZXRhaWwiLCJkcmFnZ2VkTm9kZSIsImRpc3BhdGNoRXZlbnQiLCJsZXZlbCIsIl9zdGVwMyIsInN0cmluZ2lmeSIsImlzSGlkZGVuIiwidWwiLCJwYXJlbnRJZCIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJfY2xpY2tCb3R0b21FZGdlIiwidGVzdCIsImNyZWF0ZUVsZW1lbnROUyIsInBhcnNlRmxvYXQiLCJfaG92ZXJOb2RlIiwiX29uRHJhZ1N0YXJ0IiwiX29uRHJhZ092ZXIiLCJvZmZzZXRIZWlnaHQiLCJpc1ZlcnRpY2FsTm9kZSIsIm5vZGVXcmFwcGVyIiwiY2hpbGROb2RlcyIsImRyb3BDcml0ZXJpYSIsImlzVmVydGljYWxMYXllciIsImxpbmVMYXllciIsImpvaW4iLCJub2RlTGF5ZXIiLCJkcmFnZ2VkVGQiLCJub2RlQ2VsbCIsImNoYXJ0IiwiX3RoaXMxMiIsIl9sb29wQ2hhcnQiLCJ0b3VjaGVzIiwibGFzdFgiLCJ0cmFuc2Zvcm0iLCJsYXN0VGYiLCJsYXN0WSIsInN0YXJ0WSIsInRhcmdldFRvdWNoZXMiLCJzdGFydFgiLCJwYWdlWSIsInBhZ2VYIiwiQ3VzdG9tRXZlbnQiLCJwYW5TdGFydCIsIl9vblBhbm5pbmciLCJwYW5uaW5nIiwibmV3WCIsIm5ld1kiLCJnZXRDb21wdXRlZFN0eWxlIiwibWF0cml4IiwiY3Vyc29yIiwibmV3U2NhbGUiLCJfc2V0Q2hhcnRTY2FsZSIsIk1hdGgiLCJjbGllbnRYIiwiY2xpZW50WSIsImRpc3QiLCJ0aXRsZSIsInBpbmNoRGlzdEVuZCIsImRpZmYiLCJIVE1MRWxlbWVudCIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIl0sIm1hcHBpbmdzIjoiOHdDQUFxQkEscUJBQ25CLFFBQUFBLEdBQVlDLEdBQVNDLGdCQUFBQyxLQUFBSCxFQUFBLElBQUFJLEdBQUFDLDJCQUFBRixNQUFBSCxFQUFBTSxXQUFBQyxPQUFBQyxlQUFBUixJQUFBUyxLQUFBTixNQVluQk8sU0FBUUMsVUFBVUMsUUFBVSxTQUFVQyxHQUNwQyxHQUFJQyxHQUFJWCxLQUFLWSxXQUViLE9BQU9aLE1BQUthLEtBQ1YsU0FBQUMsR0FBQSxNQUFTSCxHQUFFSSxRQUFRTCxLQUFZRyxLQUFLLFdBQUEsTUFBTUMsTUFqQjdCakIsU0FBQUEsR0FBQUEsTUFrQkhjLEdBQUVJLFFBQVFMLEtBQVlHLEtBQUssV0FBUSxLQUFNRyxPQWpCcEMsSUFzQmpCQyxJQXJCT0MsVUFBQSxPQXVCTEMsT0FBVSxLQXJCZEMsb0JBQUEsRUFDQUMsTUFBQSxJQUNBQyxXQUFBLEdBdUJJQyxpQkFBb0IsV0FyQnhCQyxXQUFBLEVBQ0FDLFVBQUEsTUFDQUMsS0FBQSxFQUNBQyxNQUFBLEdBVm1CQyxFQUFBeEIsT0FBQXlCLE9BQUFaLEVBQUFuQixFQWdCZixJQUpKUyxFQUFBQSxRQUFRQyxFQTBCUlAsRUFBSzZCLGlCQUFpQixRQUFTN0IsRUFBSzhCLFlBQVlDLEtBQWpCL0IsSUF0QjNCMkIsRUFBQUYsS0FBV1gsRUFBUUwsZUFBVixDQUEyQnVCLFNBQUFDLGNBQUFOLEVBQUFPLGdCQUNwQ0MsTUFBQUMsU0FBQSxTQUFBcEMsRUFBQTZCLGlCQUFvQnBCLFlBQVZULEVBQTJCcUMsWUFBTU4sS0FBakMvQixJQUFtQ0EsRUFBQTZCLGlCQUFBLGFBQUE3QixFQUFBcUMsWUFBQU4sS0FBQS9CLElBQWVnQyxTQUE1RE0sS0FBQVQsaUJBQUEsVUFBQTdCLEVBQUF1QyxVQUFBUixLQUFBL0IsSUFBQWdDLFNBRkZNLEtBQUFULGlCQUFBLFdBQUE3QixFQUFB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QUFHc0IsVUFuU3pDek4sRUFBQUEsUUFBQUEsR0FBVS9HLFFBQVYrQyxFQUF1Qm1RLFFBQVMsR0FBQXVCLFVBQ2hDeE0sRUFBQUEsUUFBUXpILEdBQUFBLFFBQVl1RyxFQUFBQSxRQUFwQixHQUFBME4sZ0RBRUF4TSxHQUNELEdBQUFsRixFQUFBbVEsU0FBQSxJQUFBblEsRUFBQW1RLFFBQUFwTyxPQUFBLENBQ0QsR0FBQTRQLEdBQUloRCxLQUFPeE0sY0FBQW5DLEVBQ1Q5RixNQUFBZ0ssUUFDRStFLFVBQVM5TSxFQURYakMsS0FBQWdLLFFBRUUwTixlQUFnQnhWLHdDQUdsQjhJLEdBQ0ErRCxHQUFBQSxLQUFBQSxRQUFPaE0sU0FBUCxDQUNBMlUsR0FBQUEsR0FBQUEsS0FBTXBNLGNBQWF5RCxFQUV0Qi9PLE1BQUFnSyxRQUFBMk4sYUFBQUYsdUNBR0R6TSxHQUNBQSxHQUFBQSxLQUFBQSxRQUFRbEosU0FBQUEsQ0FDUjlCLEtBQUFnSyxRQUFTeEksVUFBVyxDQUNsQndKLElBQUFBLEdBQUFBLEtBQVFsSixRQUFBQSxhQUFpQjlCLEtBQWF5QyxRQUFLd1MsY0FFM0NqSyxHQUFBQSxFQUNBQSxLQUFBQSxlQUFRbEosS0FBUixHQUNEOFYsRUFBQSxHQUNENVgsS0FBQXFYLGVBQUFyWCxNQUFBLFdBLzNDZ0M2WCw2QkFBakJoWSxTQXE0Q2hCMlIsT0F4Rk1zRyxlQUFQQyxPQUFBLFlBQUFsWSIsImZpbGUiOiJvcmdjaGFydC13ZWJjb21wb25lbnRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZ0NoYXJ0IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTsgLy8gYWx3YXlzIGNhbGwgc3VwZXIoKSBmaXJzdCBpbiB0aGUgY3Rvci5cblxuICAgIC8qIEZyYW5rbHksIEkgZG8gYmVsaWV2ZSBTaG93IERPTSBoYXMgdGhlIG5hcnJvdyB1c2FnZSByYW5nZS4gKi9cbiAgICAvLyBBdHRhY2ggYSBzaGFkb3cgcm9vdCB0byB0aGUgZWxlbWVudC5cbiAgICAvLyBsZXQgc2hhZG93Um9vdCA9IHRoaXMuYXR0YWNoU2hhZG93KHttb2RlOiAnb3Blbid9KTtcblxuICAgIC8vIHNoYWRvd1Jvb3QuaW5uZXJIVE1MID0gYFxuICAgIC8vICAgPHN0eWxlPiA8L3N0eWxlPlxuICAgIC8vICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPiA8L2Rpdj5cbiAgICAvLyBgO1xuXG4gICAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgbGV0IFAgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXG4gICAgICByZXR1cm4gdGhpcy50aGVuKFxuICAgICAgICB2YWx1ZSA9PiBQLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbigoKSA9PiB2YWx1ZSksXG4gICAgICAgIHJlYXNvbiA9PiBQLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbigoKSA9PiB7IHRocm93IHJlYXNvbjsgfSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAnbm9kZVRpdGxlJzogJ25hbWUnLFxuICAgICAgICAnbm9kZUlkJzogJ2lkJyxcbiAgICAgICAgJ3RvZ2dsZVNpYmxpbmdzUmVzcCc6IGZhbHNlLFxuICAgICAgICAnZGVwdGgnOiA5OTksXG4gICAgICAgICdjaGFydENsYXNzJzogJycsXG4gICAgICAgICdwYXJlbnROb2RlU3ltYm9sJzogJ2ZhLXVzZXJzJyxcbiAgICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxuICAgICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXG4gICAgICAgICdwYW4nOiBmYWxzZSxcbiAgICAgICAgJ3pvb20nOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdHM7XG5cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xpY2tDaGFydC5iaW5kKHRoaXMpKTtcblxuICAgIGlmIChvcHRzLnBhbiAmJiBvcHRzLmNoYXJ0Q29udGFpbmVyKSB7XG4gICAgICBsZXQgY2hhcnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdHMuY2hhcnRDb250YWluZXIpO1xuXG4gICAgICBjaGFydENvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vblBhblN0YXJ0LmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5fb25QYW5TdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX29uUGFuRW5kLmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX29uUGFuRW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGlmIChvcHRzLnpvb20gJiYgb3B0cy5jaGFydENvbnRhaW5lcikge1xuICAgICAgbGV0IGNoYXJ0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRzLmNoYXJ0Q29udGFpbmVyKTtcblxuICAgICAgY2hhcnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLl9vbldoZWVsaW5nLmJpbmQodGhpcykpO1xuICAgICAgY2hhcnRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX29uVG91Y2hTdGFydC5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fb25Ub3VjaEVuZC5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGRhdGEgPSBvcHRzLmRhdGE7XG5cbiAgICB0aGlzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnb3JnY2hhcnQnICsgKG9wdHMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyBvcHRzLmNoYXJ0Q2xhc3MgOiAnJykgK1xuICAgICAgKG9wdHMuZGlyZWN0aW9uICE9PSAndDJiJyA/ICcgJyArIG9wdHMuZGlyZWN0aW9uIDogJycpKTtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7IC8vIGxvY2FsIGpzb24gZGF0YXNvdXJjZVxuICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSh0aGlzLCBvcHRzLmFqYXhVUkwgPyBkYXRhIDogdGhpcy5fYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJiBkYXRhLnN0YXJ0c1dpdGgoJyMnKSkgeyAvLyB1bCBkYXRhc291cmNlXG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KHRoaXMsIHRoaXMuX2J1aWxkSnNvbkRTKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGF0YSkuY2hpbGRyZW5bMF0pLCAwKTtcbiAgICB9IGVsc2UgeyAvLyBhamF4IGRhdGFzb3VyY2VcbiAgICAgIGxldCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICBzcGlubmVyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyJyk7XG4gICAgICB0aGlzLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgdGhpcy5fZ2V0SlNPTihkYXRhKVxuICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSh0aGF0LCBvcHRzLmFqYXhVUkwgPyByZXNwIDogdGhhdC5fYXR0YWNoUmVsKHJlc3AsICcwMCcpLCAwKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdmYWlsZWQgdG8gZmV0Y2ggZGF0YXNvdXJjZSBmb3Igb3JnY2hhcnQnLCBlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHNwaW5uZXIgPSB0aGF0LnF1ZXJ5U2VsZWN0b3IoJy5zcGlubmVyJyk7XG5cbiAgICAgICAgc3Bpbm5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNwaW5uZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG5cbiAgfVxuXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyTmFtZSwgb2xkVmFsLCBuZXdWYWwpIHtcblxuICB9XG5cbiAgX2Nsb3Nlc3QoZWwsIGZuKSB7XG4gICAgcmV0dXJuIGVsICYmICgoZm4oZWwpICYmIGVsICE9PSB0aGlzKSA/IGVsIDogdGhpcy5fY2xvc2VzdChlbC5wYXJlbnROb2RlLCBmbikpO1xuICB9XG4gIF9zaWJsaW5ncyhlbCwgZXhwcikge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsLnBhcmVudE5vZGUuY2hpbGRyZW4pLmZpbHRlcigoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZCAhPT0gZWwpIHtcbiAgICAgICAgaWYgKGV4cHIpIHtcbiAgICAgICAgICByZXR1cm4gZWwubWF0Y2hlcyhleHByKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBfcHJldkFsbChlbCwgZXhwcikge1xuICAgIGxldCBzaWJzID0gW10sXG4gICAgICBwcmV2U2liID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIHdoaWxlIChwcmV2U2liKSB7XG4gICAgICBpZiAoIWV4cHIgfHwgcHJldlNpYi5tYXRjaGVzKGV4cHIpKSB7XG4gICAgICAgIHNpYnMucHVzaChwcmV2U2liKTtcbiAgICAgIH1cbiAgICAgIHByZXZTaWIgPSBwcmV2U2liLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgfVxuICAgIHJldHVybiBzaWJzO1xuICB9XG4gIF9uZXh0QWxsKGVsLCBleHByKSB7XG4gICAgbGV0IHNpYnMgPSBbXTtcbiAgICBsZXQgbmV4dFNpYiA9IGVsLm5leHRFbGVtZW50U2libGluZztcblxuICAgIHdoaWxlIChuZXh0U2liKSB7XG4gICAgICBpZiAoIWV4cHIgfHwgbmV4dFNpYi5tYXRjaGVzKGV4cHIpKSB7XG4gICAgICAgIHNpYnMucHVzaChuZXh0U2liKTtcbiAgICAgIH1cbiAgICAgIG5leHRTaWIgPSBuZXh0U2liLm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG4gICAgcmV0dXJuIHNpYnM7XG4gIH1cbiAgX2lzVmlzaWJsZShlbCkge1xuICAgIHJldHVybiBlbC5vZmZzZXRQYXJlbnQgIT09IG51bGw7XG4gIH1cbiAgX2FkZENsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWVzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWVzLmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX3JlbW92ZUNsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWVzKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGlmIChjbGFzc05hbWVzLmluZGV4T2YoJyAnKSA+IDApIHtcbiAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goKGNsYXNzTmFtZSkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgX2NzcyhlbGVtZW50cywgcHJvcCwgdmFsKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnN0eWxlW3Byb3BdID0gdmFsO1xuICAgIH0pO1xuICB9XG4gIF9yZW1vdmVBdHRyKGVsZW1lbnRzLCBhdHRyKSB7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9KTtcbiAgfVxuICBfb25lKGVsLCB0eXBlLCBsaXN0ZW5lciwgc2VsZikge1xuICAgIGxldCBvbmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxpc3RlbmVyLmNhbGwoc2VsZiwgZXZlbnQpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIG9uZSk7XG4gIH1cbiAgX2dldERlc2NFbGVtZW50cyhhbmNlc3RvcnMsIHNlbGVjdG9yKSB7XG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcblxuICAgIGFuY2VzdG9ycy5mb3JFYWNoKChlbCkgPT4gcmVzdWx0cy5wdXNoKC4uLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbiAgX2dldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0aGlzLnN0YXR1c1RleHQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAvLyB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9KTtcbiAgfVxuICBfYnVpbGRKc29uRFMobGkpIHtcbiAgICBsZXQgc3ViT2JqID0ge1xuICAgICAgJ25hbWUnOiBsaS5maXJzdENoaWxkLnRleHRDb250ZW50LnRyaW0oKSxcbiAgICAgICdyZWxhdGlvbnNoaXAnOiAobGkucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnTEknID8gJzEnIDogJzAnKSArXG4gICAgICAgIChsaS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCA+IDEgPyAxIDogMCkgKyAobGkuY2hpbGRyZW4ubGVuZ3RoID8gMSA6IDApXG4gICAgfTtcblxuICAgIGlmIChsaS5pZCkge1xuICAgICAgc3ViT2JqLmlkID0gbGkuaWQ7XG4gICAgfVxuICAgIGlmIChsaS5xdWVyeVNlbGVjdG9yKCd1bCcpKSB7XG4gICAgICBBcnJheS5mcm9tKGxpLnF1ZXJ5U2VsZWN0b3IoJ3VsJykuY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoaXMuX2J1aWxkSnNvbkRTKGVsKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1Yk9iajtcbiAgfVxuICBfYXR0YWNoUmVsKGRhdGEsIGZsYWdzKSB7XG4gICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xuICAgICAgZm9yIChsZXQgaXRlbSBvZiBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIHRoaXMuX2F0dGFjaFJlbChpdGVtLCAnMScgKyAoZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgX3JlcGFpbnQobm9kZSkge1xuICAgIGlmIChub2RlKSB7XG4gICAgICBub2RlLnN0eWxlLm9mZnNldFdpZHRoID0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICB9XG4gIH1cbiAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcbiAgX2lzSW5BY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5lZGdlJykuY2xhc3NOYW1lLmluZGV4T2YoJ2ZhLScpID4gLTE7XG4gIH1cbiAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICBfZ2V0Tm9kZVN0YXRlKG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgbGV0IGNyaXRlcmlhLFxuICAgICAgc3RhdGUgPSB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG5cbiAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICBjcml0ZXJpYSA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKTtcbiAgICAgIGlmIChjcml0ZXJpYSkge1xuICAgICAgICBzdGF0ZS5leGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZXhpc3QgJiYgdGhpcy5faXNWaXNpYmxlKGNyaXRlcmlhLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0pKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIGNyaXRlcmlhID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVFInKS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAoY3JpdGVyaWEpIHtcbiAgICAgICAgc3RhdGUuZXhpc3QgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmV4aXN0ICYmIHRoaXMuX2lzVmlzaWJsZShjcml0ZXJpYSkpIHtcbiAgICAgICAgc3RhdGUudmlzaWJsZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgY3JpdGVyaWEgPSB0aGlzLl9zaWJsaW5ncyh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUpO1xuICAgICAgaWYgKGNyaXRlcmlhLmxlbmd0aCkge1xuICAgICAgICBzdGF0ZS5leGlzdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZXhpc3QgJiYgY3JpdGVyaWEuc29tZSgoZWwpID0+IHRoaXMuX2lzVmlzaWJsZShlbCkpKSB7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gIGdldFJlbGF0ZWROb2Rlcyhub2RlLCByZWxhdGlvbikge1xuICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKVxuICAgICAgICAucGFyZW50Tm9kZS5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpO1xuICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykubGFzdENoaWxkLmNoaWxkcmVuKVxuICAgICAgICAubWFwKChlbCkgPT4gZWwucXVlcnlTZWxlY3RvcignLm5vZGUnKSk7XG4gICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NpYmxpbmdzKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZSlcbiAgICAgICAgLm1hcCgoZWwpID0+IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykpO1xuICAgIH1cbiAgICByZXR1cm4gW107XG4gIH1cbiAgX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKSB7XG4gICAgbGV0IG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICBsZWZ0RWRnZSA9IG5vZGUucXVlcnlTZWxlY3RvcignLmxlZnRFZGdlJyksXG4gICAgICByaWdodEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodEVkZ2UnKSxcbiAgICAgIHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGU7XG5cbiAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3AgJiYgKHR5cGVvZiBvcHRzLmFqYXhVUkwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCcubm9kZXMnKSkuZGF0YXNldC5zaWJsaW5nc0xvYWRlZCkpIHtcbiAgICAgIGxldCBwcmV2U2liID0gdGVtcC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLFxuICAgICAgICBuZXh0U2liID0gdGVtcC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgIGlmIChwcmV2U2liKSB7XG4gICAgICAgIGlmIChwcmV2U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QuYWRkKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LmFkZCgnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIGxlZnRFZGdlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobmV4dFNpYikge1xuICAgICAgICBpZiAobmV4dFNpYi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi1sZWZ0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmlnaHRFZGdlLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QucmVtb3ZlKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHNpYnMgPSB0aGlzLl9zaWJsaW5ncyh0ZW1wKSxcbiAgICAgICAgc2lic1Zpc2libGUgPSBzaWJzLmxlbmd0aCA/ICFzaWJzLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSA6IGZhbHNlO1xuXG4gICAgICBsZWZ0RWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXJpZ2h0Jywgc2lic1Zpc2libGUpO1xuICAgICAgbGVmdEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1sZWZ0JywgIXNpYnNWaXNpYmxlKTtcbiAgICAgIHJpZ2h0RWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLWxlZnQnLCBzaWJzVmlzaWJsZSk7XG4gICAgICByaWdodEVkZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1yaWdodCcsICFzaWJzVmlzaWJsZSk7XG4gICAgfVxuICB9XG4gIF9ob3Zlck5vZGUoZXZlbnQpIHtcbiAgICBsZXQgbm9kZSA9IGV2ZW50LnRhcmdldCxcbiAgICAgIGZsYWcgPSBmYWxzZSxcbiAgICAgIHRvcEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC50b3BFZGdlJyksXG4gICAgICBib3R0b21FZGdlID0gbm9kZS5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuYm90dG9tRWRnZScpLFxuICAgICAgbGVmdEVkZ2UgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC5sZWZ0RWRnZScpO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgaWYgKHRvcEVkZ2UpIHtcbiAgICAgICAgZmxhZyA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JykudmlzaWJsZTtcbiAgICAgICAgdG9wRWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXVwJywgIWZsYWcpO1xuICAgICAgICB0b3BFZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tZG93bicsIGZsYWcpO1xuICAgICAgfVxuICAgICAgaWYgKGJvdHRvbUVkZ2UpIHtcbiAgICAgICAgZmxhZyA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnY2hpbGRyZW4nKS52aXNpYmxlO1xuICAgICAgICBib3R0b21FZGdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZhLWNoZXZyb24tZG93bicsICFmbGFnKTtcbiAgICAgICAgYm90dG9tRWRnZS5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XG4gICAgICB9XG4gICAgICBpZiAobGVmdEVkZ2UpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoSG9yaXpvbnRhbEFycm93KG5vZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLmVkZ2UnKSkuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZmEtY2hldnJvbi11cCcsICdmYS1jaGV2cm9uLWRvd24nLCAnZmEtY2hldnJvbi1yaWdodCcsICdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvLyBkZWZpbmUgbm9kZSBjbGljayBldmVudCBoYW5kbGVyXG4gIF9jbGlja05vZGUoZXZlbnQpIHtcbiAgICBsZXQgY2xpY2tlZE5vZGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgZm9jdXNlZE5vZGUgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5mb2N1c2VkJyk7XG5cbiAgICBpZiAoZm9jdXNlZE5vZGUpIHtcbiAgICAgIGZvY3VzZWROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQnKTtcbiAgICB9XG4gICAgY2xpY2tlZE5vZGUuY2xhc3NMaXN0LmFkZCgnZm9jdXNlZCcpO1xuICB9XG4gIC8vIGJ1aWxkIHRoZSBwYXJlbnQgbm9kZSBvZiBzcGVjaWZpYyBub2RlXG4gIF9idWlsZFBhcmVudE5vZGUoY3VycmVudFJvb3QsIG5vZGVEYXRhLCBjYWxsYmFjaykge1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcblxuICAgIG5vZGVEYXRhLnJlbGF0aW9uc2hpcCA9ICcwMDEnO1xuICAgIHRoaXMuX2NyZWF0ZU5vZGUobm9kZURhdGEsIDApXG4gICAgICAudGhlbihmdW5jdGlvbiAobm9kZURpdikge1xuICAgICAgICBub2RlRGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlLXVwJyk7XG4gICAgICAgIG5vZGVEaXYuY2xhc3NMaXN0LmFkZCgnc2xpZGUtZG93bicpO1xuICAgICAgICBsZXQgcGFyZW50VHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICAgIHN1cGVyaW9yTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyksXG4gICAgICAgICAgaW5mZXJpb3JMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgICBjaGlsZHJlblRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICBwYXJlbnRUci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2hpZGRlbicpO1xuICAgICAgICBwYXJlbnRUci5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49XCIyXCI+PC90ZD5gO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChwYXJlbnRUcik7XG4gICAgICAgIHN1cGVyaW9yTGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzIGhpZGRlbicpO1xuICAgICAgICBzdXBlcmlvckxpbmUuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoc3VwZXJpb3JMaW5lKTtcbiAgICAgICAgaW5mZXJpb3JMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGluZXMgaGlkZGVuJyk7XG4gICAgICAgIGluZmVyaW9yTGluZS5pbm5lckhUTUwgPSBgPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoaW5mZXJpb3JMaW5lKTtcbiAgICAgICAgY2hpbGRyZW5Uci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vZGVzJyk7XG4gICAgICAgIGNoaWxkcmVuVHIuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPVwiMlwiPjwvdGQ+YDtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoY2hpbGRyZW5Ucik7XG4gICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RkJykuYXBwZW5kQ2hpbGQobm9kZURpdik7XG4gICAgICAgIHRoYXQuaW5zZXJ0QmVmb3JlKHRhYmxlLCB0aGF0LmNoaWxkcmVuWzBdKTtcbiAgICAgICAgdGFibGUuY2hpbGRyZW5bM10uY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQodGhhdC5sYXN0Q2hpbGQpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgcGFyZW50IG5vZGUnLCBlcnIpO1xuICAgICAgfSk7XG4gIH1cbiAgX3N3aXRjaFZlcnRpY2FsQXJyb3coYXJyb3cpIHtcbiAgICBhcnJvdy5jbGFzc0xpc3QudG9nZ2xlKCdmYS1jaGV2cm9uLXVwJyk7XG4gICAgYXJyb3cuY2xhc3NMaXN0LnRvZ2dsZSgnZmEtY2hldnJvbi1kb3duJyk7XG4gIH1cbiAgLy8gc2hvdyB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIHNob3dQYXJlbnQobm9kZSkge1xuICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxuICAgIGxldCB0ZW1wID0gdGhpcy5fcHJldkFsbCh0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKSk7XG5cbiAgICB0aGlzLl9yZW1vdmVDbGFzcyh0ZW1wLCAnaGlkZGVuJyk7XG4gICAgLy8ganVzdCBzaG93IG9ubHkgb25lIGxpbmVcbiAgICB0aGlzLl9hZGRDbGFzcyhBcnJheSh0ZW1wWzBdLmNoaWxkcmVuKS5zbGljZSgxLCAtMSksICdoaWRkZW4nKTtcbiAgICAvLyBzaG93IHBhcmVudCBub2RlIHdpdGggYW5pbWF0aW9uXG4gICAgbGV0IHBhcmVudCA9IHRlbXBbMl0ucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcblxuICAgIHRoaXMuX29uZShwYXJlbnQsICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlJyk7XG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hWZXJ0aWNhbEFycm93KG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnRvcEVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gICAgdGhpcy5fcmVwYWludChwYXJlbnQpO1xuICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdzbGlkZScpO1xuICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1kb3duJyk7XG4gIH1cbiAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgc2hvd1NpYmxpbmdzKG5vZGUsIGRpcmVjdGlvbikge1xuICAgIC8vIGZpcnN0bHksIHNob3cgdGhlIHNpYmxpbmcgdGQgdGFnc1xuICAgIGxldCBzaWJsaW5ncyA9IFtdLFxuICAgICAgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZTtcblxuICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgIHNpYmxpbmdzID0gZGlyZWN0aW9uID09PSAnbGVmdCcgPyB0aGlzLl9wcmV2QWxsKHRlbXApIDogdGhpcy5fbmV4dEFsbCh0ZW1wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2libGluZ3MgPSB0aGlzLl9zaWJsaW5ncyh0ZW1wKTtcbiAgICB9XG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3Moc2libGluZ3MsICdoaWRkZW4nKTtcbiAgICAvLyBzZWNvbmRseSwgc2hvdyB0aGUgbGluZXNcbiAgICBsZXQgdXBwZXJMZXZlbCA9IHRoaXMuX3ByZXZBbGwodGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSkpO1xuXG4gICAgdGVtcCA9IEFycmF5LmZyb20odXBwZXJMZXZlbFswXS5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiAuaGlkZGVuJykpO1xuICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKHRlbXAuc2xpY2UoMCwgc2libGluZ3MubGVuZ3RoICogMiksICdoaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgIH1cbiAgICAvLyB0aGlyZGx5LCBkbyBzb21lIGNsZWFuaW5nIHN0dWZmXG4gICAgaWYgKCF0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKHVwcGVyTGV2ZWwsICdoaWRkZW4nKTtcbiAgICAgIGxldCBwYXJlbnQgPSB1cHBlckxldmVsWzJdLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG5cbiAgICAgIHRoaXMuX29uZShwYXJlbnQsICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZScpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICB0aGlzLl9yZXBhaW50KHBhcmVudCk7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUnKTtcbiAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1kb3duJyk7XG4gICAgfVxuICAgIC8vIGxhc3RseSwgc2hvdyB0aGUgc2libGluZyBub2RlcyB3aXRoIGFuaW1hdGlvblxuICAgIHNpYmxpbmdzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faXNWaXNpYmxlKG5vZGUpKSB7XG4gICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZScpO1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtbGVmdCcsICdzbGlkZS1yaWdodCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9vbmUoc2libGluZ3NbMF0ucXVlcnlTZWxlY3RvcignLnNsaWRlJyksICd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2libGluZ3MuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZScpKSwgJ3NsaWRlJyk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLl9pc0luQWN0aW9uKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX3N3aXRjaEhvcml6b250YWxBcnJvdyhub2RlKTtcbiAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCcudG9wRWRnZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLWNoZXZyb24tdXAnKTtcbiAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yKCcudG9wRWRnZScpLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG4gIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gIGhpZGVTaWJsaW5ncyhub2RlLCBkaXJlY3Rpb24pIHtcbiAgICBsZXQgbm9kZUNvbnRhaW5lciA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZSxcbiAgICAgIHNpYmxpbmdzID0gdGhpcy5fc2libGluZ3Mobm9kZUNvbnRhaW5lcik7XG5cbiAgICBzaWJsaW5ncy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgIGlmIChzaWIucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKSkge1xuICAgICAgICB0aGlzLmRhdGFzZXQuaW5BamF4ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWRpcmVjdGlvbiB8fCAoZGlyZWN0aW9uICYmIGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSkge1xuICAgICAgbGV0IHByZVNpYnMgPSB0aGlzLl9wcmV2QWxsKG5vZGVDb250YWluZXIpO1xuXG4gICAgICBwcmVTaWJzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzVmlzaWJsZShub2RlKSkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZScsICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFkaXJlY3Rpb24gfHwgKGRpcmVjdGlvbiAmJiBkaXJlY3Rpb24gIT09ICdsZWZ0JykpIHtcbiAgICAgIGxldCBuZXh0U2licyA9IHRoaXMuX25leHRBbGwobm9kZUNvbnRhaW5lcik7XG5cbiAgICAgIG5leHRTaWJzLmZvckVhY2goKHNpYikgPT4ge1xuICAgICAgICBBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzVmlzaWJsZShub2RlKSkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZScsICdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBhbmltYXRlZE5vZGVzID0gW107XG5cbiAgICB0aGlzLl9zaWJsaW5ncyhub2RlQ29udGFpbmVyKS5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGFuaW1hdGVkTm9kZXMsIEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZScpKSk7XG4gICAgfSk7XG4gICAgbGV0IGxpbmVzID0gW107XG5cbiAgICBmb3IgKGxldCBub2RlIG9mIGFuaW1hdGVkTm9kZXMpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKTtcbiAgICAgIH0pLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICAgIGxpbmVzLnB1c2godGVtcCk7XG4gICAgICBsaW5lcy5wdXNoKHRlbXAucHJldmlvdXNFbGVtZW50U2libGluZyk7XG4gICAgfVxuICAgIGxpbmVzID0gWy4uLm5ldyBTZXQobGluZXMpXTtcbiAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICBsaW5lLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9KTtcblxuICAgIHRoaXMuX29uZShhbmltYXRlZE5vZGVzWzBdLCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICBsaW5lLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgIH0pO1xuICAgICAgbGV0IHNpYnMgPSBbXTtcblxuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICBzaWJzID0gdGhpcy5fcHJldkFsbChub2RlQ29udGFpbmVyLCAnOm5vdCguaGlkZGVuKScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpYnMgPSB0aGlzLl9uZXh0QWxsKG5vZGVDb250YWluZXIsICc6bm90KC5oaWRkZW4pJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNpYnMgPSB0aGlzLl9zaWJsaW5ncyhub2RlQ29udGFpbmVyKTtcbiAgICAgIH1cbiAgICAgIGxldCB0ZW1wID0gQXJyYXkuZnJvbSh0aGlzLl9jbG9zZXN0KG5vZGVDb250YWluZXIsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiA6bm90KC5oaWRkZW4pJykpO1xuXG4gICAgICBsZXQgc29tZUxpbmVzID0gdGVtcC5zbGljZSgxLCBkaXJlY3Rpb24gPyBzaWJzLmxlbmd0aCAqIDIgKyAxIDogLTEpO1xuXG4gICAgICB0aGlzLl9hZGRDbGFzcyhzb21lTGluZXMsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuX3JlbW92ZUNsYXNzKGFuaW1hdGVkTm9kZXMsICdzbGlkZScpO1xuICAgICAgc2licy5mb3JFYWNoKChzaWIpID0+IHtcbiAgICAgICAgQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuc2xpY2UoMSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLl9pc1Zpc2libGUobm9kZSkpIHtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGUtbGVmdCcsICdzbGlkZS1yaWdodCcpO1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzbGlkZS11cCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHNpYnMuZm9yRWFjaCgoc2liKSA9PiB7XG4gICAgICAgIHRoaXMuX2FkZENsYXNzKEFycmF5LmZyb20oc2liLnF1ZXJ5U2VsZWN0b3JBbGwoJy5saW5lcycpKSwgJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLl9hZGRDbGFzcyhBcnJheS5mcm9tKHNpYi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZXMnKSksICdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShzaWIucXVlcnlTZWxlY3RvckFsbCgnLnZlcnRpY2FsTm9kZXMnKSksICdoaWRkZW4nKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fYWRkQ2xhc3Moc2licywgJ2hpZGRlbicpO1xuXG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gIH1cbiAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgYW5jZXN0b3Igbm9kZSBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgaGlkZVBhcmVudChub2RlKSB7XG4gICAgbGV0IHRlbXAgPSBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgIH0pLnBhcmVudE5vZGUuY2hpbGRyZW4pLnNsaWNlKDAsIDMpO1xuXG4gICAgaWYgKHRlbXBbMF0ucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKSkge1xuICAgICAgdGhpcy5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzXG4gICAgaWYgKHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnc2libGluZ3MnKS52aXNpYmxlKSB7XG4gICAgICB0aGlzLmhpZGVTaWJsaW5ncyhub2RlKTtcbiAgICB9XG4gICAgLy8gaGlkZSB0aGUgbGluZXNcbiAgICBsZXQgbGluZXMgPSB0ZW1wLnNsaWNlKDEpO1xuXG4gICAgdGhpcy5fY3NzKGxpbmVzLCAndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cbiAgICBsZXQgcGFyZW50ID0gdGVtcFswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpLFxuICAgICAgZ3JhbmRmYXRoZXJWaXNpYmxlID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGU7XG5cbiAgICBpZiAocGFyZW50ICYmIHRoaXMuX2lzVmlzaWJsZShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnc2xpZGUnLCAnc2xpZGUtZG93bicpO1xuICAgICAgdGhpcy5fb25lKHBhcmVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZScpO1xuICAgICAgICB0aGlzLl9yZW1vdmVBdHRyKGxpbmVzLCAnc3R5bGUnKTtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBjdXJyZW50IG5vZGUgaGFzIHRoZSBwYXJlbnQgbm9kZSwgaGlkZSBpdCByZWN1cnNpdmVseVxuICAgIGlmIChwYXJlbnQgJiYgZ3JhbmRmYXRoZXJWaXNpYmxlKSB7XG4gICAgICB0aGlzLmhpZGVQYXJlbnQocGFyZW50KTtcbiAgICB9XG4gIH1cbiAgLy8gZXhwb3NlZCBtZXRob2RcbiAgYWRkUGFyZW50KGN1cnJlbnRSb290LCBkYXRhKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuXG4gICAgdGhpcy5fYnVpbGRQYXJlbnROb2RlKGN1cnJlbnRSb290LCBkYXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWN1cnJlbnRSb290LnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC50b3BFZGdlJykpIHtcbiAgICAgICAgbGV0IHRvcEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgdG9wRWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmEnKTtcbiAgICAgICAgY3VycmVudFJvb3QuYXBwZW5kQ2hpbGQodG9wRWRnZSk7XG4gICAgICB9XG4gICAgICB0aGF0LnNob3dQYXJlbnQoY3VycmVudFJvb3QpO1xuICAgIH0pO1xuICB9XG4gIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzIGZvciByZXF1ZXN0aW5nIG5ldyBub2Rlc1xuICBfc3RhcnRMb2FkaW5nKGFycm93LCBub2RlKSB7XG4gICAgbGV0IG9wdHMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YXNldC5pbkFqYXggIT09ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YXNldC5pbkFqYXggPT09ICd0cnVlJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFycm93LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIGxldCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgc3Bpbm5lci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2ZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lcicpO1xuICAgIG5vZGUuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+ICo6bm90KC5zcGlubmVyKScpKSwgJ2hhenknKTtcbiAgICB0aGlzLmRhdGFzZXQuaW5BamF4ID0gdHJ1ZTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgX2VuZExvYWRpbmcoYXJyb3csIG5vZGUpIHtcbiAgICBsZXQgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAgIGFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIG5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICB0aGlzLl9yZW1vdmVDbGFzcyhBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLmhhenknKSksICdoYXp5Jyk7XG4gICAgdGhpcy5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICB9XG4gIC8vIGRlZmluZSBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgdG9wIGVkZ2VcbiAgX2NsaWNrVG9wRWRnZShldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGxldCB0aGF0ID0gdGhpcyxcbiAgICAgIHRvcEVkZ2UgPSBldmVudC50YXJnZXQsXG4gICAgICBub2RlID0gdG9wRWRnZS5wYXJlbnROb2RlLFxuICAgICAgcGFyZW50U3RhdGUgPSB0aGlzLl9nZXROb2RlU3RhdGUobm9kZSwgJ3BhcmVudCcpLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAgIGlmIChwYXJlbnRTdGF0ZS5leGlzdCkge1xuICAgICAgbGV0IHRlbXAgPSB0aGlzLl9jbG9zZXN0KG5vZGUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSk7XG4gICAgICBsZXQgcGFyZW50ID0gdGVtcC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQucXVlcnlTZWxlY3RvcignLm5vZGUnKTtcblxuICAgICAgaWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlJykpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBoaWRlIHRoZSBhbmNlc3RvciBub2RlcyBhbmQgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgIGlmIChwYXJlbnRTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaGlkZVBhcmVudChub2RlKTtcbiAgICAgICAgdGhpcy5fb25lKHBhcmVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3N3aXRjaFZlcnRpY2FsQXJyb3codG9wRWRnZSk7XG4gICAgICAgICAgICB0aGlzLl9zd2l0Y2hIb3Jpem9udGFsQXJyb3cobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGFuY2VzdG9ycyBhbmQgc2libGluZ3NcbiAgICAgICAgdGhpcy5zaG93UGFyZW50KG5vZGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsb2FkIHRoZSBuZXcgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgbGV0IG5vZGVJZCA9IHRvcEVkZ2UucGFyZW50Tm9kZS5pZDtcblxuICAgICAgLy8gc3RhcnQgdXAgbG9hZGluZyBzdGF0dXNcbiAgICAgIGlmICh0aGlzLl9zdGFydExvYWRpbmcodG9wRWRnZSwgbm9kZSkpIHtcbiAgICAgICAgLy8gbG9hZCBuZXcgbm9kZXNcbiAgICAgICAgdGhpcy5fZ2V0SlNPTih0eXBlb2Ygb3B0cy5hamF4VVJMLnBhcmVudCA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgb3B0cy5hamF4VVJMLnBhcmVudChub2RlLmRhdGFzZXQuc291cmNlKSA6IG9wdHMuYWpheFVSTC5wYXJlbnQgKyBub2RlSWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgaWYgKHRoYXQuZGF0YXNldC5pbkFqYXggPT09ICd0cnVlJykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3ApLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGF0LmFkZFBhcmVudChub2RlLCByZXNwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBwYXJlbnQgbm9kZSBkYXRhLicsIGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGF0Ll9lbmRMb2FkaW5nKHRvcEVkZ2UsIG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gcmVjdXJzaXZlbHkgaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgaGlkZUNoaWxkcmVuKG5vZGUpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0ZW1wID0gdGhpcy5fbmV4dEFsbChub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSksXG4gICAgICBsYXN0SXRlbSA9IHRlbXBbdGVtcC5sZW5ndGggLSAxXSxcbiAgICAgIGxpbmVzID0gW107XG5cbiAgICBpZiAobGFzdEl0ZW0ucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKSkge1xuICAgICAgdGhpcy5kYXRhc2V0LmluQWpheCA9IGZhbHNlO1xuICAgIH1cbiAgICBsZXQgZGVzY2VuZGFudHMgPSBBcnJheS5mcm9tKGxhc3RJdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLmZpbHRlcigoZWwpID0+IHRoYXQuX2lzVmlzaWJsZShlbCkpLFxuICAgICAgaXNWZXJ0aWNhbERlc2MgPSBsYXN0SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ3ZlcnRpY2FsTm9kZXMnKTtcblxuICAgIGlmICghaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgIGRlc2NlbmRhbnRzLmZvckVhY2goKGRlc2MpID0+IHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkobGluZXMsXG4gICAgICAgICAgdGhhdC5fcHJldkFsbCh0aGF0Ll9jbG9zZXN0KGRlc2MsIChlbCkgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpKSwgJy5saW5lcycpKTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMgPSBbLi4ubmV3IFNldChsaW5lcyldO1xuICAgICAgdGhpcy5fY3NzKGxpbmVzLCAndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICB9XG4gICAgdGhpcy5fb25lKGRlc2NlbmRhbnRzWzBdLCAndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZScpO1xuICAgICAgaWYgKGlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgIHRoYXQuX2FkZENsYXNzKHRlbXAsICdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgIGVsLnBhcmVudE5vZGUubGFzdENoaWxkLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYWRkQ2xhc3MoQXJyYXkuZnJvbShsYXN0SXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcudmVydGljYWxOb2RlcycpKSwgJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2lzSW5BY3Rpb24obm9kZSkpIHtcbiAgICAgICAgdGhpcy5fc3dpdGNoVmVydGljYWxBcnJvdyhub2RlLnF1ZXJ5U2VsZWN0b3IoJy5ib3R0b21FZGdlJykpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuX2FkZENsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUgc2xpZGUtdXAnKTtcbiAgfVxuICAvLyBzaG93IHRoZSBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgc2hvd0NoaWxkcmVuKG5vZGUpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXMsXG4gICAgICB0ZW1wID0gdGhpcy5fbmV4dEFsbChub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSksXG4gICAgICBkZXNjZW5kYW50cyA9IFtdO1xuXG4gICAgdGhpcy5fcmVtb3ZlQ2xhc3ModGVtcCwgJ2hpZGRlbicpO1xuICAgIGlmICh0ZW1wLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZlcnRpY2FsTm9kZXMnKSkpIHtcbiAgICAgIHRlbXAuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZGVzY2VuZGFudHMsIEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZmlsdGVyKChlbCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGF0Ll9pc1Zpc2libGUoZWwpO1xuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgQXJyYXkuZnJvbSh0ZW1wWzJdLmNoaWxkcmVuKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShkZXNjZW5kYW50cyxcbiAgICAgICAgICBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3IoJ3RyJykucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZmlsdGVyKChlbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQuX2lzVmlzaWJsZShlbCk7XG4gICAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHRoZSB0d28gZm9sbG93aW5nIHN0YXRlbWVudHMgYXJlIHVzZWQgdG8gZW5mb3JjZSBicm93c2VyIHRvIHJlcGFpbnRcbiAgICB0aGlzLl9yZXBhaW50KGRlc2NlbmRhbnRzWzBdKTtcbiAgICB0aGlzLl9vbmUoZGVzY2VuZGFudHNbMF0sICd0cmFuc2l0aW9uZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9yZW1vdmVDbGFzcyhkZXNjZW5kYW50cywgJ3NsaWRlJyk7XG4gICAgICBpZiAodGhpcy5faXNJbkFjdGlvbihub2RlKSkge1xuICAgICAgICB0aGlzLl9zd2l0Y2hWZXJ0aWNhbEFycm93KG5vZGUucXVlcnlTZWxlY3RvcignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG4gICAgdGhpcy5fYWRkQ2xhc3MoZGVzY2VuZGFudHMsICdzbGlkZScpO1xuICAgIHRoaXMuX3JlbW92ZUNsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUtdXAnKTtcbiAgfVxuICAvLyBidWlsZCB0aGUgY2hpbGQgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICBfYnVpbGRDaGlsZE5vZGUoYXBwZW5kVG8sIG5vZGVEYXRhLCBjYWxsYmFjaykge1xuICAgIGxldCBkYXRhID0gbm9kZURhdGEuY2hpbGRyZW4gfHwgbm9kZURhdGEuc2libGluZ3M7XG5cbiAgICBhcHBlbmRUby5xdWVyeVNlbGVjdG9yKCd0ZCcpLnNldEF0dHJpYnV0ZSgnY29sU3BhbicsIGRhdGEubGVuZ3RoICogMik7XG4gICAgdGhpcy5idWlsZEhpZXJhcmNoeShhcHBlbmRUbywgeyAnY2hpbGRyZW4nOiBkYXRhIH0sIDAsIGNhbGxiYWNrKTtcbiAgfVxuICAvLyBleHBvc2VkIG1ldGhvZFxuICBhZGRDaGlsZHJlbihub2RlLCBkYXRhKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGNvdW50ID0gMDtcblxuICAgIHRoaXMuZGF0YXNldC5pbkVkaXQgPSAnYWRkQ2hpbGRyZW4nO1xuICAgIHRoaXMuX2J1aWxkQ2hpbGROb2RlLmNhbGwodGhpcywgdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCsrY291bnQgPT09IGRhdGEuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yKCcuYm90dG9tRWRnZScpKSB7XG4gICAgICAgICAgbGV0IGJvdHRvbUVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICBib3R0b21FZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYScpO1xuICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoYm90dG9tRWRnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3IoJy5zeW1ib2wnKSkge1xuICAgICAgICAgIGxldCBzeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICBzeW1ib2wuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSAnICsgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2wnKTtcbiAgICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJzpzY29wZSA+IC50aXRsZScpLmFwcGVuZENoaWxkKHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93Q2hpbGRyZW4obm9kZSk7XG4gICAgICAgIHRoYXQuZGF0YXNldC5pbkVkaXQgPSAnJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvLyBiaW5kIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBib3R0b20gZWRnZVxuICBfY2xpY2tCb3R0b21FZGdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGJvdHRvbUVkZ2UgPSBldmVudC50YXJnZXQsXG4gICAgICBub2RlID0gYm90dG9tRWRnZS5wYXJlbnROb2RlLFxuICAgICAgY2hpbGRyZW5TdGF0ZSA9IHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnY2hpbGRyZW4nKTtcblxuICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RSJztcbiAgICAgIH0pLnBhcmVudE5vZGUubGFzdENoaWxkO1xuXG4gICAgICBpZiAoQXJyYXkuZnJvbSh0ZW1wLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpLnNvbWUoKG5vZGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmlzaWJsZShub2RlKSAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKTtcbiAgICAgIH0pKSB7IHJldHVybjsgfVxuICAgICAgLy8gaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgIGlmIChjaGlsZHJlblN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlQ2hpbGRyZW4obm9kZSk7XG4gICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBkZXNjZW5kYW50c1xuICAgICAgICB0aGlzLnNob3dDaGlsZHJlbihub2RlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBsb2FkIHRoZSBuZXcgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgbGV0IG5vZGVJZCA9IGJvdHRvbUVkZ2UucGFyZW50Tm9kZS5pZDtcblxuICAgICAgaWYgKHRoaXMuX3N0YXJ0TG9hZGluZyhib3R0b21FZGdlLCBub2RlKSkge1xuICAgICAgICB0aGlzLl9nZXRKU09OKHR5cGVvZiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgIG9wdHMuYWpheFVSTC5jaGlsZHJlbihub2RlLmRhdGFzZXQuc291cmNlKSA6IG9wdHMuYWpheFVSTC5jaGlsZHJlbiArIG5vZGVJZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICBpZiAodGhhdC5kYXRhc2V0LmluQWpheCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBpZiAocmVzcC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRDaGlsZHJlbihub2RlLCByZXNwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjaGlsZHJlbiBub2RlcyBkYXRhJywgZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX2VuZExvYWRpbmcoYm90dG9tRWRnZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBzdWJzZXF1ZW50IHByb2Nlc3Npbmcgb2YgYnVpbGQgc2libGluZyBub2Rlc1xuICBfY29tcGxlbWVudExpbmUob25lU2libGluZywgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KSB7XG4gICAgbGV0IHRlbXAgPSBvbmVTaWJsaW5nLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbjtcblxuICAgIHRlbXBbMF0uY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgc2libGluZ0NvdW50ICogMik7XG4gICAgdGVtcFsxXS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nU2libGlnQ291bnQ7IGkrKykge1xuICAgICAgbGV0IHJpZ2h0TGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyksXG4gICAgICAgIGxlZnRMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblxuICAgICAgcmlnaHRMaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncmlnaHRMaW5lIHRvcExpbmUnKTtcbiAgICAgIHJpZ2h0TGluZS5pbm5lckhUTUwgPSAnJm5ic3A7JztcbiAgICAgIHRlbXBbMl0uaW5zZXJ0QmVmb3JlKHJpZ2h0TGluZSwgdGVtcFsyXS5jaGlsZHJlblsxXSk7XG4gICAgICBsZWZ0TGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xlZnRMaW5lIHRvcExpbmUnKTtcbiAgICAgIGxlZnRMaW5lLmlubmVySFRNTCA9ICcmbmJzcDsnO1xuICAgICAgdGVtcFsyXS5pbnNlcnRCZWZvcmUobGVmdExpbmUsIHRlbXBbMl0uY2hpbGRyZW5bMV0pO1xuICAgIH1cbiAgfVxuICAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gIF9idWlsZFNpYmxpbmdOb2RlKG5vZGVDaGFydCwgbm9kZURhdGEsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgbmV3U2libGluZ0NvdW50ID0gbm9kZURhdGEuc2libGluZ3MgPyBub2RlRGF0YS5zaWJsaW5ncy5sZW5ndGggOiBub2RlRGF0YS5jaGlsZHJlbi5sZW5ndGgsXG4gICAgICBleGlzdGluZ1NpYmxpZ0NvdW50ID0gbm9kZUNoYXJ0LnBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdURCcgPyB0aGlzLl9jbG9zZXN0KG5vZGVDaGFydCwgKGVsKSA9PiB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RSJztcbiAgICAgIH0pLmNoaWxkcmVuLmxlbmd0aCA6IDEsXG4gICAgICBzaWJsaW5nQ291bnQgPSBleGlzdGluZ1NpYmxpZ0NvdW50ICsgbmV3U2libGluZ0NvdW50LFxuICAgICAgaW5zZXJ0UG9zdGlvbiA9IChzaWJsaW5nQ291bnQgPiAxKSA/IE1hdGguZmxvb3Ioc2libGluZ0NvdW50IC8gMiAtIDEpIDogMDtcblxuICAgIC8vIGp1c3QgYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgZm9yIHRoZSBzcGVjaWZpYyBub2RlXG4gICAgaWYgKG5vZGVDaGFydC5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnVEQnKSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuX3ByZXZBbGwobm9kZUNoYXJ0LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7XG5cbiAgICAgIHRlbXBbMF0ucmVtb3ZlKCk7XG4gICAgICB0ZW1wWzFdLnJlbW92ZSgpO1xuICAgICAgbGV0IGNoaWxkQ291bnQgPSAwO1xuXG4gICAgICB0aGF0Ll9idWlsZENoaWxkTm9kZS5jYWxsKHRoYXQsIHRoYXQuX2Nsb3Nlc3Qobm9kZUNoYXJ0LnBhcmVudE5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLFxuICAgICAgICBub2RlRGF0YSwgKCkgPT4ge1xuICAgICAgICAgIGlmICgrK2NoaWxkQ291bnQgPT09IG5ld1NpYmxpbmdDb3VudCkge1xuICAgICAgICAgICAgbGV0IHNpYmxpbmdUZHMgPSBBcnJheS5mcm9tKHRoYXQuX2Nsb3Nlc3Qobm9kZUNoYXJ0LnBhcmVudE5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpXG4gICAgICAgICAgICAgIC5sYXN0Q2hpbGQuY2hpbGRyZW4pO1xuXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTaWJsaWdDb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgbGV0IHRlbXAgPSBub2RlQ2hhcnQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICAgIEFycmF5LmZyb20odGVtcC5jaGlsZHJlbikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBzaWJsaW5nVGRzWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nVGRzWzBdKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRlbXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHRoYXQuX2NvbXBsZW1lbnRMaW5lKHNpYmxpbmdUZHNbMF0sIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCk7XG4gICAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHNpYmxpbmdUZHMsICdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgc2libGluZ1Rkcy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoYXQuX2FkZENsYXNzKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJyksICdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGV0IHRlbXAgPSBub2RlQ2hhcnQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICAgIHNpYmxpbmdUZHNbaW5zZXJ0UG9zdGlvbl0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZUNoYXJ0LnBhcmVudE5vZGUsIHNpYmxpbmdUZHNbaW5zZXJ0UG9zdGlvbiArIDFdKTtcbiAgICAgICAgICAgICAgdGVtcC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgdGhhdC5fY29tcGxlbWVudExpbmUoc2libGluZ1Rkc1tpbnNlcnRQb3N0aW9uXSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3Moc2libGluZ1RkcywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICB0aGF0Ll9hZGRDbGFzcyh0aGF0Ll9nZXREZXNjRWxlbWVudHMoc2libGluZ1Rkcy5zbGljZSgwLCBpbnNlcnRQb3N0aW9uICsgMSksICcubm9kZScpLCAnc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGhhdC5fZ2V0RGVzY0VsZW1lbnRzKHNpYmxpbmdUZHMuc2xpY2UoaW5zZXJ0UG9zdGlvbiArIDEpLCAnLm5vZGUnKSwgJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2UgeyAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBhbmQgcGFyZW50IG5vZGUgZm9yIHRoZSBzcGVjaWZpYyBuZG9lXG4gICAgICBsZXQgbm9kZUNvdW50ID0gMDtcblxuICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeS5jYWxsKHRoYXQsIHRoYXQsIG5vZGVEYXRhLCAwLCAoKSA9PiB7XG4gICAgICAgIGlmICgrK25vZGVDb3VudCA9PT0gc2libGluZ0NvdW50KSB7XG4gICAgICAgICAgbGV0IHRlbXAgPSBub2RlQ2hhcnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzNdXG4gICAgICAgICAgICAuY2hpbGRyZW5baW5zZXJ0UG9zdGlvbl0sXG4gICAgICAgICAgICB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG5cbiAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCAyKTtcbiAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChub2RlQ2hhcnQpO1xuICAgICAgICAgIHRlbXAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGQsIHRlbXAubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICAgICAgICB0aGF0Ll9jb21wbGVtZW50TGluZSh0ZW1wLCBzaWJsaW5nQ291bnQsIDEpO1xuXG4gICAgICAgICAgbGV0IHRlbXAyID0gdGhhdC5fY2xvc2VzdChub2RlQ2hhcnQsIChlbCkgPT4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSlcbiAgICAgICAgICAgIC5wYXJlbnROb2RlLmNoaWxkcmVuWzBdO1xuXG4gICAgICAgICAgdGVtcDIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgdGhhdC5fYWRkQ2xhc3MoQXJyYXkuZnJvbSh0ZW1wMi5xdWVyeVNlbGVjdG9yQWxsKCcubm9kZScpKSwgJ3NsaWRlLWRvd24nKTtcblxuICAgICAgICAgIGxldCB0ZW1wMyA9IHRoaXMuX3NpYmxpbmdzKG5vZGVDaGFydC5wYXJlbnROb2RlKTtcblxuICAgICAgICAgIHRoYXQuX2FkZENsYXNzKHRlbXAzLCAnaGlkZGVuJyk7XG4gICAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGhhdC5fZ2V0RGVzY0VsZW1lbnRzKHRlbXAzLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLCAnLm5vZGUnKSwgJ3NsaWRlLXJpZ2h0Jyk7XG4gICAgICAgICAgdGhhdC5fYWRkQ2xhc3ModGhhdC5fZ2V0RGVzY0VsZW1lbnRzKHRlbXAzLnNsaWNlKGluc2VydFBvc3Rpb24pLCAnLm5vZGUnKSwgJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgYWRkU2libGluZ3Mobm9kZSwgZGF0YSkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgIHRoaXMuZGF0YXNldC5pbkVkaXQgPSAnYWRkU2libGluZ3MnO1xuICAgIHRoaXMuX2J1aWxkU2libGluZ05vZGUuY2FsbCh0aGlzLCB0aGlzLl9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLCBkYXRhLCAoKSA9PiB7XG4gICAgICB0aGF0Ll9jbG9zZXN0KG5vZGUsIChlbCkgPT4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnbm9kZXMnKSlcbiAgICAgICAgLmRhdGFzZXQuc2libGluZ3NMb2FkZWQgPSB0cnVlO1xuICAgICAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3IoJy5sZWZ0RWRnZScpKSB7XG4gICAgICAgIGxldCByaWdodEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgbGVmdEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgcmlnaHRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmEnKTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChyaWdodEVkZ2UpO1xuICAgICAgICBsZWZ0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmEnKTtcbiAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICB9XG4gICAgICB0aGF0LnNob3dTaWJsaW5ncyhub2RlKTtcbiAgICAgIHRoYXQuZGF0YXNldC5pbkVkaXQgPSAnJztcbiAgICB9KTtcbiAgfVxuICByZW1vdmVOb2Rlcyhub2RlKSB7XG4gICAgbGV0IHBhcmVudCA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgZWwgPT4gZWwubm9kZU5hbWUgPT09ICdUQUJMRScpLnBhcmVudE5vZGUsXG4gICAgICBzaWJzID0gdGhpcy5fc2libGluZ3MocGFyZW50LnBhcmVudE5vZGUpO1xuXG4gICAgaWYgKHBhcmVudC5ub2RlTmFtZSA9PT0gJ1REJykge1xuICAgICAgaWYgKHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAnc2libGluZ3MnKS5leGlzdCkge1xuICAgICAgICBzaWJzWzJdLnF1ZXJ5U2VsZWN0b3IoJy50b3BMaW5lJykubmV4dEVsZW1lbnRTaWJsaW5nLnJlbW92ZSgpO1xuICAgICAgICBzaWJzWzJdLnF1ZXJ5U2VsZWN0b3IoJy50b3BMaW5lJykucmVtb3ZlKCk7XG4gICAgICAgIHNpYnNbMF0uY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgc2lic1syXS5jaGlsZHJlbi5sZW5ndGgpO1xuICAgICAgICBzaWJzWzFdLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIHNpYnNbMl0uY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICAgICAgcGFyZW50LnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2lic1swXS5jaGlsZHJlblswXS5yZW1vdmVBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcbiAgICAgICAgc2lic1swXS5xdWVyeVNlbGVjdG9yKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9zaWJsaW5ncyhzaWJzWzBdKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgQXJyYXkuZnJvbShwYXJlbnQucGFyZW50Tm9kZS5jaGlsZHJlbikuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG4gICAgfVxuICB9XG4gIC8vIGJpbmQgY2xpY2sgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGxlZnQgYW5kIHJpZ2h0IGVkZ2VzXG4gIF9jbGlja0hvcml6b250YWxFZGdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIGhFZGdlID0gZXZlbnQudGFyZ2V0LFxuICAgICAgbm9kZSA9IGhFZGdlLnBhcmVudE5vZGUsXG4gICAgICBzaWJsaW5nc1N0YXRlID0gdGhpcy5fZ2V0Tm9kZVN0YXRlKG5vZGUsICdzaWJsaW5ncycpO1xuXG4gICAgaWYgKHNpYmxpbmdzU3RhdGUuZXhpc3QpIHtcbiAgICAgIGxldCB0ZW1wID0gdGhpcy5fY2xvc2VzdChub2RlLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICAgIH0pLnBhcmVudE5vZGUsXG4gICAgICAgIHNpYmxpbmdzID0gdGhpcy5fc2libGluZ3ModGVtcCk7XG5cbiAgICAgIGlmIChzaWJsaW5ncy5zb21lKChlbCkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVmlzaWJsZShub2RlKSAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGUnKTtcbiAgICAgIH0pKSB7IHJldHVybjsgfVxuICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwKSB7XG4gICAgICAgIGxldCBwcmV2U2liID0gdGhpcy5fY2xvc2VzdChub2RlLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsXG4gICAgICAgICAgbmV4dFNpYiA9IHRoaXMuX2Nsb3Nlc3Qobm9kZSwgKGVsKSA9PiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJykucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgaWYgKGhFZGdlLmNsYXNzTGlzdC5jb250YWlucygnbGVmdEVkZ2UnKSkge1xuICAgICAgICAgIGlmIChwcmV2U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChuZXh0U2liLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncyhub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncyhub2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNob3dTaWJsaW5ncyhub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBsb2FkIHRoZSBuZXcgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICBsZXQgbm9kZUlkID0gaEVkZ2UucGFyZW50Tm9kZS5pZCxcbiAgICAgICAgdXJsID0gKHRoaXMuX2dldE5vZGVTdGF0ZShub2RlLCAncGFyZW50JykuZXhpc3QpID9cbiAgICAgICAgICAodHlwZW9mIG9wdHMuYWpheFVSTC5zaWJsaW5ncyA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICBvcHRzLmFqYXhVUkwuc2libGluZ3MoSlNPTi5wYXJzZShub2RlLmRhdGFzZXQuc291cmNlKSkgOiBvcHRzLmFqYXhVUkwuc2libGluZ3MgKyBub2RlSWQpIDpcbiAgICAgICAgICAodHlwZW9mIG9wdHMuYWpheFVSTC5mYW1pbGllcyA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICBvcHRzLmFqYXhVUkwuZmFtaWxpZXMoSlNPTi5wYXJzZShub2RlLmRhdGFzZXQuc291cmNlKSkgOiBvcHRzLmFqYXhVUkwuZmFtaWxpZXMgKyBub2RlSWQpO1xuXG4gICAgICBpZiAodGhpcy5fc3RhcnRMb2FkaW5nKGhFZGdlLCBub2RlKSkge1xuICAgICAgICB0aGlzLl9nZXRKU09OKHVybClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICBpZiAodGhhdC5kYXRhc2V0LmluQWpheCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBpZiAocmVzcC5zaWJsaW5ncyB8fCByZXNwLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgIHRoYXQuYWRkU2libGluZ3Mobm9kZSwgcmVzcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgc2libGluZyBub2RlcyBkYXRhJywgZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoYXQuX2VuZExvYWRpbmcoaEVkZ2UsIG5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gZXZlbnQgaGFuZGxlciBmb3IgdG9nZ2xlIGJ1dHRvbnMgaW4gSHlicmlkKGhvcml6b250YWwgKyB2ZXJ0aWNhbCkgT3JnQ2hhcnRcbiAgX2NsaWNrVG9nZ2xlQnV0dG9uKGV2ZW50KSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgdG9nZ2xlQnRuID0gZXZlbnQudGFyZ2V0LFxuICAgICAgZGVzY1dyYXBwZXIgPSB0b2dnbGVCdG4ucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcsXG4gICAgICBkZXNjZW5kYW50cyA9IEFycmF5LmZyb20oZGVzY1dyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSksXG4gICAgICBjaGlsZHJlbiA9IEFycmF5LmZyb20oZGVzY1dyYXBwZXIuY2hpbGRyZW4pLm1hcChpdGVtID0+IGl0ZW0ucXVlcnlTZWxlY3RvcignLm5vZGUnKSk7XG5cbiAgICBpZiAoY2hpbGRyZW4uc29tZSgoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlJykpKSB7IHJldHVybjsgfVxuICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdmYS1wbHVzLXNxdWFyZScpO1xuICAgIHRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdmYS1taW51cy1zcXVhcmUnKTtcbiAgICBpZiAoZGVzY2VuZGFudHNbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZS11cCcpKSB7XG4gICAgICBkZXNjV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIHRoaXMuX3JlcGFpbnQoY2hpbGRyZW5bMF0pO1xuICAgICAgdGhpcy5fYWRkQ2xhc3MoY2hpbGRyZW4sICdzbGlkZScpO1xuICAgICAgdGhpcy5fcmVtb3ZlQ2xhc3MoY2hpbGRyZW4sICdzbGlkZS11cCcpO1xuICAgICAgdGhpcy5fb25lKGNoaWxkcmVuWzBdLCAndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgICAgdGhhdC5fcmVtb3ZlQ2xhc3MoY2hpbGRyZW4sICdzbGlkZScpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FkZENsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUgc2xpZGUtdXAnKTtcbiAgICAgIHRoaXMuX29uZShkZXNjZW5kYW50c1swXSwgJ3RyYW5zaXRpb25lbmQnLCAoKSA9PiB7XG4gICAgICAgIHRoYXQuX3JlbW92ZUNsYXNzKGRlc2NlbmRhbnRzLCAnc2xpZGUnKTtcbiAgICAgICAgZGVzY2VuZGFudHMuZm9yRWFjaChkZXNjID0+IHtcbiAgICAgICAgICBsZXQgdWwgPSB0aGF0Ll9jbG9zZXN0KGRlc2MsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsLm5vZGVOYW1lID09PSAnVUwnO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGRlc2NlbmRhbnRzLmZvckVhY2goZGVzYyA9PiB7XG4gICAgICAgIGxldCBzdWJUQnMgPSBBcnJheS5mcm9tKGRlc2MucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZUJ0bicpKTtcblxuICAgICAgICB0aGF0Ll9yZW1vdmVDbGFzcyhzdWJUQnMsICdmYS1taW51cy1zcXVhcmUnKTtcbiAgICAgICAgdGhhdC5fYWRkQ2xhc3Moc3ViVEJzLCAnZmEtcGx1cy1zcXVhcmUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBfZGlzcGF0Y2hDbGlja0V2ZW50KGV2ZW50KSB7XG4gICAgbGV0IGNsYXNzTGlzdCA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3Q7XG5cbiAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKCd0b3BFZGdlJykpIHtcbiAgICAgIHRoaXMuX2NsaWNrVG9wRWRnZShldmVudCk7XG4gICAgfSBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ3JpZ2h0RWRnZScpIHx8IGNsYXNzTGlzdC5jb250YWlucygnbGVmdEVkZ2UnKSkge1xuICAgICAgdGhpcy5fY2xpY2tIb3Jpem9udGFsRWRnZShldmVudCk7XG4gICAgfSBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ2JvdHRvbUVkZ2UnKSkge1xuICAgICAgdGhpcy5fY2xpY2tCb3R0b21FZGdlKGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKGNsYXNzTGlzdC5jb250YWlucygndG9nZ2xlQnRuJykpIHtcbiAgICAgIHRoaXMuX2NsaWNrVG9nZ2xlQnV0dG9uKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2xpY2tOb2RlKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgX29uRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgbGV0IG5vZGVEaXYgPSBldmVudC50YXJnZXQsXG4gICAgICBvcHRzID0gdGhpcy5vcHRpb25zLFxuICAgICAgaXNGaXJlZm94ID0gL2ZpcmVmb3gvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cbiAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJywgJ2hhY2sgZm9yIGZpcmVmb3gnKTtcbiAgICB9XG4gICAgLy8gaWYgdXNlcnMgZW5hYmxlIHpvb20gb3IgZGlyZWN0aW9uIG9wdGlvbnNcbiAgICBpZiAodGhpcy5zdHlsZS50cmFuc2Zvcm0pIHtcbiAgICAgIGxldCBnaG9zdE5vZGUsIG5vZGVDb3ZlcjtcblxuICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XG4gICAgICAgIGdob3N0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gICAgICAgIGdob3N0Tm9kZS5jbGFzc0xpc3QuYWRkKCdnaG9zdC1ub2RlJyk7XG4gICAgICAgIG5vZGVDb3ZlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xuICAgICAgICBnaG9zdE5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvdmVyKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChnaG9zdE5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2hvc3ROb2RlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAuZ2hvc3Qtbm9kZScpO1xuICAgICAgICBub2RlQ292ZXIgPSBnaG9zdE5vZGUuY2hpbGRyZW5bMF07XG4gICAgICB9XG4gICAgICBsZXQgdHJhbnNWYWx1ZXMgPSB0aGlzLnN0eWxlLnRyYW5zZm9ybS5zcGxpdCgnLCcpLFxuICAgICAgICBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/XG4gICAgICAgICAgdHJhbnNWYWx1ZXNbMF0uc2xpY2UodHJhbnNWYWx1ZXNbMF0uaW5kZXhPZignKCcpICsgMSkgOiB0cmFuc1ZhbHVlc1sxXSkpO1xuXG4gICAgICBnaG9zdE5vZGUuc2V0QXR0cmlidXRlKCd3aWR0aCcsIG5vZGVEaXYub2Zmc2V0V2lkdGgpO1xuICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0Jywgbm9kZURpdi5vZmZzZXRIZWlnaHQpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgneCcsIDUgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5JywgNSAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgMTIwICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgNDAgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeCcsIDQgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdyeScsIDQgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAxICogc2NhbGUpO1xuICAgICAgbGV0IHhPZmZzZXQgPSBldmVudC5vZmZzZXRYICogc2NhbGUsXG4gICAgICAgIHlPZmZzZXQgPSBldmVudC5vZmZzZXRZICogc2NhbGU7XG5cbiAgICAgIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2wycicpIHtcbiAgICAgICAgeE9mZnNldCA9IGV2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9IGV2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XG4gICAgICAgIHhPZmZzZXQgPSBub2RlRGl2Lm9mZnNldFdpZHRoIC0gZXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gZXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcbiAgICAgICAgeE9mZnNldCA9IG5vZGVEaXYub2Zmc2V0V2lkdGggLSBldmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSBub2RlRGl2Lm9mZnNldEhlaWdodCAtIGV2ZW50Lm9mZnNldFkgKiBzY2FsZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0ZpcmVmb3gpIHsgLy8gaGFjayBmb3Igb2xkIHZlcnNpb24gb2YgRmlyZWZveCg8IDQ4LjApXG4gICAgICAgIGxldCBnaG9zdE5vZGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgICAgZ2hvc3ROb2RlV3JhcHBlci5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJyArIChuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhnaG9zdE5vZGUpO1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZVdyYXBwZXIsIHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZ2hvc3ROb2RlLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGRyYWdnZWQgPSBldmVudC50YXJnZXQsXG4gICAgICBkcmFnWm9uZSA9IHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgKGVsKSA9PiB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucGFyZW50Tm9kZS5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCcubm9kZScpLFxuICAgICAgZHJhZ0hpZXIgPSBBcnJheS5mcm9tKHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgKGVsKSA9PiB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgIH0pLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub2RlJykpO1xuXG4gICAgdGhpcy5kcmFnZ2VkID0gZHJhZ2dlZDtcbiAgICBBcnJheS5mcm9tKHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLm5vZGUnKSkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKCFkcmFnSGllci5pbmNsdWRlcyhub2RlKSkge1xuICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEpIHtcbiAgICAgICAgICBpZiAob3B0cy5kcm9wQ3JpdGVyaWEoZHJhZ2dlZCwgZHJhZ1pvbmUsIG5vZGUpKSB7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnYWxsb3dlZERyb3AnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9vbkRyYWdPdmVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgZHJvcFpvbmUgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKCFkcm9wWm9uZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FsbG93ZWREcm9wJykpIHtcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgIH1cbiAgfVxuICBfb25EcmFnRW5kKGV2ZW50KSB7XG4gICAgQXJyYXkuZnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGxvd2VkRHJvcCcpKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWxsb3dlZERyb3AnKTtcbiAgICB9KTtcbiAgfVxuICBfb25Ecm9wKGV2ZW50KSB7XG4gICAgbGV0IGRyb3Bab25lID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgIGRyYWdnZWQgPSB0aGlzLmRyYWdnZWQsXG4gICAgICBkcmFnWm9uZSA9IHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jbGFzc0xpc3QgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdub2RlcycpO1xuICAgICAgfSkucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcblxuICAgIHRoaXMuX3JlbW92ZUNsYXNzKEFycmF5LmZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsb3dlZERyb3AnKSksICdhbGxvd2VkRHJvcCcpO1xuICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxuICAgIGlmICghZHJvcFpvbmUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZykgeyAvLyBpZiB0aGUgZHJvcCB6b25lIGlzIGEgbGVhZiBub2RlXG4gICAgICBsZXQgYm90dG9tRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgYm90dG9tRWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmEnKTtcbiAgICAgIGRyb3Bab25lLmFwcGVuZENoaWxkKGJvdHRvbUVkZ2UpO1xuICAgICAgZHJvcFpvbmUucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCAyKTtcbiAgICAgIGxldCB0YWJsZSA9IHRoaXMuX2Nsb3Nlc3QoZHJvcFpvbmUsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgICAgfSksXG4gICAgICAgIHVwcGVyVHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpLFxuICAgICAgICBsb3dlclRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKSxcbiAgICAgICAgbm9kZVRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgdXBwZXJUci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzJyk7XG4gICAgICB1cHBlclRyLmlubmVySFRNTCA9IGA8dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPmA7XG4gICAgICB0YWJsZS5hcHBlbmRDaGlsZCh1cHBlclRyKTtcbiAgICAgIGxvd2VyVHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycpO1xuICAgICAgbG93ZXJUci5pbm5lckhUTUwgPSBgPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+YDtcbiAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGxvd2VyVHIpO1xuICAgICAgbm9kZVRyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm9kZXMnKTtcbiAgICAgIHRhYmxlLmFwcGVuZENoaWxkKG5vZGVUcik7XG4gICAgICBBcnJheS5mcm9tKGRyYWdnZWQucXVlcnlTZWxlY3RvckFsbCgnLmhvcml6b250YWxFZGdlJykpLmZvckVhY2goKGhFZGdlKSA9PiB7XG4gICAgICAgIGRyYWdnZWQucmVtb3ZlQ2hpbGQoaEVkZ2UpO1xuICAgICAgfSk7XG4gICAgICBsZXQgZHJhZ2dlZFRkID0gdGhpcy5fY2xvc2VzdChkcmFnZ2VkLCAoZWwpID0+IGVsLm5vZGVOYW1lID09PSAnVEFCTEUnKS5wYXJlbnROb2RlO1xuXG4gICAgICBub2RlVHIuYXBwZW5kQ2hpbGQoZHJhZ2dlZFRkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGRyb3BDb2xzcGFuID0gd2luZG93LnBhcnNlSW50KGRyb3Bab25lLnBhcmVudE5vZGUuY29sU3BhbikgKyAyO1xuXG4gICAgICBkcm9wWm9uZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnY29sc3BhbicsIGRyb3BDb2xzcGFuKTtcbiAgICAgIGRyb3Bab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgZHJvcENvbHNwYW4pO1xuICAgICAgaWYgKCFkcmFnZ2VkLnF1ZXJ5U2VsZWN0b3IoJy5ob3Jpem9udGFsRWRnZScpKSB7XG4gICAgICAgIGxldCByaWdodEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXG4gICAgICAgICAgbGVmdEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgcmlnaHRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmEnKTtcbiAgICAgICAgZHJhZ2dlZC5hcHBlbmRDaGlsZChyaWdodEVkZ2UpO1xuICAgICAgICBsZWZ0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmEnKTtcbiAgICAgICAgZHJhZ2dlZC5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICB9XG4gICAgICBsZXQgdGVtcCA9IGRyb3Bab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nLFxuICAgICAgICBsZWZ0bGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyksXG4gICAgICAgIHJpZ2h0bGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG5cbiAgICAgIGxlZnRsaW5lLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbGVmdExpbmUgdG9wTGluZScpO1xuICAgICAgbGVmdGxpbmUuaW5uZXJIVE1MID0gYCZuYnNwO2A7XG4gICAgICB0ZW1wLmluc2VydEJlZm9yZShsZWZ0bGluZSwgdGVtcC5jaGlsZHJlblsxXSk7XG4gICAgICByaWdodGxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyaWdodExpbmUgdG9wTGluZScpO1xuICAgICAgcmlnaHRsaW5lLmlubmVySFRNTCA9IGAmbmJzcDtgO1xuICAgICAgdGVtcC5pbnNlcnRCZWZvcmUocmlnaHRsaW5lLCB0ZW1wLmNoaWxkcmVuWzJdKTtcbiAgICAgIHRlbXAubmV4dEVsZW1lbnRTaWJsaW5nLmFwcGVuZENoaWxkKHRoaXMuX2Nsb3Nlc3QoZHJhZ2dlZCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5ub2RlTmFtZSA9PT0gJ1RBQkxFJztcbiAgICAgIH0pLnBhcmVudE5vZGUpO1xuXG4gICAgICBsZXQgZHJvcFNpYnMgPSB0aGlzLl9zaWJsaW5ncyh0aGlzLl9jbG9zZXN0KGRyYWdnZWQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwubm9kZU5hbWUgPT09ICdUQUJMRSc7XG4gICAgICB9KS5wYXJlbnROb2RlKS5tYXAoKGVsKSA9PiBlbC5xdWVyeVNlbGVjdG9yKCcubm9kZScpKTtcblxuICAgICAgaWYgKGRyb3BTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBsZXQgcmlnaHRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgIGxlZnRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuXG4gICAgICAgIHJpZ2h0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhJyk7XG4gICAgICAgIGRyb3BTaWJzWzBdLmFwcGVuZENoaWxkKHJpZ2h0RWRnZSk7XG4gICAgICAgIGxlZnRFZGdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYScpO1xuICAgICAgICBkcm9wU2lic1swXS5hcHBlbmRDaGlsZChsZWZ0RWRnZSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHNlY29uZGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcmFnZ2VkIG5vZGVcbiAgICBsZXQgZHJhZ0NvbFNwYW4gPSB3aW5kb3cucGFyc2VJbnQoZHJhZ1pvbmUuY29sU3Bhbik7XG5cbiAgICBpZiAoZHJhZ0NvbFNwYW4gPiAyKSB7XG4gICAgICBkcmFnWm9uZS5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCBkcmFnQ29sU3BhbiAtIDIpO1xuICAgICAgZHJhZ1pvbmUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgZHJhZ0NvbFNwYW4gLSAyKTtcbiAgICAgIGxldCB0ZW1wID0gZHJhZ1pvbmUucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICB0ZW1wLmNoaWxkcmVuWzFdLnJlbW92ZSgpO1xuICAgICAgdGVtcC5jaGlsZHJlblsxXS5yZW1vdmUoKTtcblxuICAgICAgbGV0IGRyYWdTaWJzID0gQXJyYXkuZnJvbShkcmFnWm9uZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bM10uY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAodGQpIHtcbiAgICAgICAgcmV0dXJuIHRkLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJyk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGRyYWdTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBkcmFnU2lic1swXS5xdWVyeVNlbGVjdG9yKCcubGVmdEVkZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgZHJhZ1NpYnNbMF0ucXVlcnlTZWxlY3RvcignLnJpZ2h0RWRnZScpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkcmFnWm9uZS5yZW1vdmVBdHRyaWJ1dGUoJ2NvbHNwYW4nKTtcbiAgICAgIGRyYWdab25lLnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykucmVtb3ZlQ2hpbGQoZHJhZ1pvbmUucXVlcnlTZWxlY3RvcignLmJvdHRvbUVkZ2UnKSk7XG4gICAgICBBcnJheS5mcm9tKGRyYWdab25lLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbikuc2xpY2UoMSkuZm9yRWFjaCgodHIpID0+IHRyLnJlbW92ZSgpKTtcbiAgICB9XG4gICAgbGV0IGN1c3RvbUUgPSBuZXcgQ3VzdG9tRXZlbnQoJ25vZGVkcm9wcGVkLm9yZ2NoYXJ0JywgeyAnZGV0YWlsJzoge1xuICAgICAgJ2RyYWdnZWROb2RlJzogZHJhZ2dlZCxcbiAgICAgICdkcmFnWm9uZSc6IGRyYWdab25lLmNoaWxkcmVuWzBdLFxuICAgICAgJ2Ryb3Bab25lJzogZHJvcFpvbmVcbiAgICB9fSk7XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoY3VzdG9tRSk7XG4gIH1cbiAgLy8gY3JlYXRlIG5vZGVcbiAgX2NyZWF0ZU5vZGUobm9kZURhdGEsIGxldmVsKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAobm9kZURhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2Ygbm9kZURhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICBjaGlsZC5wYXJlbnRJZCA9IG5vZGVEYXRhLmlkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0cnVjdCB0aGUgY29udGVudCBvZiBub2RlXG4gICAgICBsZXQgbm9kZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICBkZWxldGUgbm9kZURhdGEuY2hpbGRyZW47XG4gICAgICBub2RlRGl2LmRhdGFzZXQuc291cmNlID0gSlNPTi5zdHJpbmdpZnkobm9kZURhdGEpO1xuICAgICAgaWYgKG5vZGVEYXRhW29wdHMubm9kZUlkXSkge1xuICAgICAgICBub2RlRGl2LmlkID0gbm9kZURhdGFbb3B0cy5ub2RlSWRdO1xuICAgICAgfVxuICAgICAgbGV0IGluRWRpdCA9IHRoYXQuZGF0YXNldC5pbkVkaXQsXG4gICAgICAgIGlzSGlkZGVuO1xuXG4gICAgICBpZiAoaW5FZGl0KSB7XG4gICAgICAgIGlzSGlkZGVuID0gaW5FZGl0ID09PSAnYWRkQ2hpbGRyZW4nID8gJyBzbGlkZS11cCcgOiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzSGlkZGVuID0gbGV2ZWwgPj0gb3B0cy5kZXB0aCA/ICcgc2xpZGUtdXAnIDogJyc7XG4gICAgICB9XG4gICAgICBub2RlRGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm9kZSAnICsgKG5vZGVEYXRhLmNsYXNzTmFtZSB8fCAnJykgKyBpc0hpZGRlbik7XG4gICAgICBpZiAob3B0cy5kcmFnZ2FibGUpIHtcbiAgICAgICAgbm9kZURpdi5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsIHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGVEYXRhLnBhcmVudElkKSB7XG4gICAgICAgIG5vZGVEaXYuc2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudCcsIG5vZGVEYXRhLnBhcmVudElkKTtcbiAgICAgIH1cbiAgICAgIG5vZGVEaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke25vZGVEYXRhW29wdHMubm9kZVRpdGxlXX08L2Rpdj5cbiAgICAgICAgJHtvcHRzLm5vZGVDb250ZW50ID8gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+JHtub2RlRGF0YVtvcHRzLm5vZGVDb250ZW50XX08L2Rpdj5gIDogJyd9XG4gICAgICBgO1xuICAgICAgLy8gYXBwZW5kIDQgZGlyZWN0aW9uIGFycm93cyBvciBleHBhbmQvY29sbGFwc2UgYnV0dG9uc1xuICAgICAgbGV0IGZsYWdzID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcnO1xuXG4gICAgICBpZiAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID4gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgIGlmICgobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgTnVtYmVyKGZsYWdzLnN1YnN0cigyLCAxKSkpIHtcbiAgICAgICAgICBsZXQgdG9nZ2xlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgICAgaWNvbiA9IGxldmVsICsgMSA+PSBvcHRzLmRlcHRoID8gJ3BsdXMnIDogJ21pbnVzJztcblxuICAgICAgICAgIHRvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RvZ2dsZUJ0biBmYSBmYS0nICsgaWNvbiArICctc3F1YXJlJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZCh0b2dnbGVCdG4pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigwLCAxKSkpIHtcbiAgICAgICAgICBsZXQgdG9wRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcblxuICAgICAgICAgIHRvcEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZCh0b3BFZGdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigxLCAxKSkpIHtcbiAgICAgICAgICBsZXQgcmlnaHRFZGdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpLFxuICAgICAgICAgICAgbGVmdEVkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG5cbiAgICAgICAgICByaWdodEVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYScpO1xuICAgICAgICAgIG5vZGVEaXYuYXBwZW5kQ2hpbGQocmlnaHRFZGdlKTtcbiAgICAgICAgICBsZWZ0RWRnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmEnKTtcbiAgICAgICAgICBub2RlRGl2LmFwcGVuZENoaWxkKGxlZnRFZGdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigyLCAxKSkpIHtcbiAgICAgICAgICBsZXQgYm90dG9tRWRnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIHN5bWJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKSxcbiAgICAgICAgICAgIHRpdGxlID0gbm9kZURpdi5xdWVyeVNlbGVjdG9yKCc6c2NvcGUgPiAudGl0bGUnKTtcblxuICAgICAgICAgIGJvdHRvbUVkZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhJyk7XG4gICAgICAgICAgbm9kZURpdi5hcHBlbmRDaGlsZChib3R0b21FZGdlKTtcbiAgICAgICAgICBzeW1ib2wuc2V0QXR0cmlidXRlKCdjbGFzcycsICdmYSAnICsgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2wnKTtcbiAgICAgICAgICB0aXRsZS5pbnNlcnRCZWZvcmUoc3ltYm9sLCB0aXRsZS5jaGlsZHJlblswXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhhdC5faG92ZXJOb2RlLmJpbmQodGhhdCkpO1xuICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhhdC5faG92ZXJOb2RlLmJpbmQodGhhdCkpO1xuICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoYXQuX2Rpc3BhdGNoQ2xpY2tFdmVudC5iaW5kKHRoYXQpKTtcbiAgICAgIGlmIChvcHRzLmRyYWdnYWJsZSkge1xuICAgICAgICBub2RlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoYXQuX29uRHJhZ1N0YXJ0LmJpbmQodGhhdCkpO1xuICAgICAgICBub2RlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhhdC5fb25EcmFnT3Zlci5iaW5kKHRoYXQpKTtcbiAgICAgICAgbm9kZURpdi5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgdGhhdC5fb25EcmFnRW5kLmJpbmQodGhhdCkpO1xuICAgICAgICBub2RlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGF0Ll9vbkRyb3AuYmluZCh0aGF0KSk7XG4gICAgICB9XG4gICAgICAvLyBhbGxvdyB1c2VyIHRvIGFwcGVuZCBkb20gbW9kaWZpY2F0aW9uIGFmdGVyIGZpbmlzaGluZyBub2RlIGNyZWF0ZSBvZiBvcmdjaGFydFxuICAgICAgaWYgKG9wdHMuY3JlYXRlTm9kZSkge1xuICAgICAgICBvcHRzLmNyZWF0ZU5vZGUobm9kZURpdiwgbm9kZURhdGEpO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKG5vZGVEaXYpO1xuICAgIH0pO1xuICB9XG4gIGJ1aWxkSGllcmFyY2h5KGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIGNhbGxiYWNrKSB7XG4gICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXG4gICAgbGV0IHRoYXQgPSB0aGlzLFxuICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgIG5vZGVXcmFwcGVyLFxuICAgICAgY2hpbGROb2RlcyA9IG5vZGVEYXRhLmNoaWxkcmVuLFxuICAgICAgaXNWZXJ0aWNhbE5vZGUgPSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPiAxKSB7IC8vIGlmIG5vZGVEYXRhIGhhcyBuZXN0ZWQgc3RydWN0dXJlXG4gICAgICBub2RlV3JhcHBlciA9IGlzVmVydGljYWxOb2RlID8gYXBwZW5kVG8gOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgaWYgKCFpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICBhcHBlbmRUby5hcHBlbmRDaGlsZChub2RlV3JhcHBlcik7XG4gICAgICB9XG4gICAgICB0aGlzLl9jcmVhdGVOb2RlKG5vZGVEYXRhLCBsZXZlbClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlRGl2KSB7XG4gICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmluc2VydEJlZm9yZShub2RlRGl2LCBub2RlV3JhcHBlci5maXJzdENoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHRkICR7Y2hpbGROb2RlcyA/IGBjb2xzcGFuPVwiJHtjaGlsZE5vZGVzLmxlbmd0aCAqIDJ9XCJgIDogJyd9PlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICBgO1xuICAgICAgICAgIHRyLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKG5vZGVEaXYpO1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmluc2VydEJlZm9yZSh0ciwgbm9kZVdyYXBwZXIuY2hpbGRyZW5bMF0gPyBub2RlV3JhcHBlci5jaGlsZHJlblswXSA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXQgbm9kZScsIGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ29uc3RydWN0IHRoZSBpbmZlcmlvciBub2RlcyBhbmQgY29ubmVjdGlvbmcgbGluZXNcbiAgICBpZiAoY2hpbGROb2Rlcykge1xuICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPT09IDEpIHsgLy8gaWYgbm9kZURhdGEgaXMganVzdCBhbiBhcnJheVxuICAgICAgICBub2RlV3JhcHBlciA9IGFwcGVuZFRvO1xuICAgICAgfVxuICAgICAgbGV0IGlzSGlkZGVuLFxuICAgICAgICBpc1ZlcnRpY2FsTGF5ZXIgPSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPj0gb3B0cy52ZXJ0aWNhbERlcHRoLFxuICAgICAgICBpbkVkaXQgPSB0aGF0LmRhdGFzZXQuaW5FZGl0O1xuXG4gICAgICBpZiAoaW5FZGl0KSB7XG4gICAgICAgIGlzSGlkZGVuID0gaW5FZGl0ID09PSAnYWRkU2libGluZ3MnID8gJycgOiAnIGhpZGRlbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc0hpZGRlbiA9IGxldmVsICsgMSA+PSBvcHRzLmRlcHRoID8gJyBoaWRkZW4nIDogJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIGRyYXcgdGhlIGxpbmUgY2xvc2UgdG8gcGFyZW50IG5vZGVcbiAgICAgIGlmICghaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgdHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaW5lcycgKyBpc0hpZGRlbik7XG4gICAgICAgIHRyLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8dGQgY29sc3Bhbj1cIiR7IGNoaWxkTm9kZXMubGVuZ3RoICogMiB9XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICBgO1xuICAgICAgICBub2RlV3JhcHBlci5hcHBlbmRDaGlsZCh0cik7XG4gICAgICB9XG4gICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xuICAgICAgbGV0IGxpbmVMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgIGxpbmVMYXllci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2xpbmVzJyArIGlzSGlkZGVuKTtcbiAgICAgIGxpbmVMYXllci5pbm5lckhUTUwgPSBgXG4gICAgICAgIDx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+XG4gICAgICAgICR7Y2hpbGROb2Rlcy5zbGljZSgxKS5tYXAoKCkgPT4gYFxuICAgICAgICAgIDx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD5cbiAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgPHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPlxuICAgICAgYDtcbiAgICAgIGxldCBub2RlTGF5ZXI7XG5cbiAgICAgIGlmIChpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgbm9kZUxheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgaWYgKGlzSGlkZGVuKSB7XG4gICAgICAgICAgbm9kZUxheWVyLmNsYXNzTGlzdC5hZGQoaXNIaWRkZW4udHJpbSgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGV2ZWwgKyAyID09PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgdHIuc2V0QXR0cmlidXRlKCdjbGFzcycsICd2ZXJ0aWNhbE5vZGVzJyArIGlzSGlkZGVuKTtcbiAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgPHRkPjwvdGQ+YDtcbiAgICAgICAgICB0ci5maXJzdENoaWxkLmFwcGVuZENoaWxkKG5vZGVMYXllcik7XG4gICAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGVXcmFwcGVyLmFwcGVuZENoaWxkKG5vZGVMYXllcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIG5vZGVMYXllci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vZGVzJyArIGlzSGlkZGVuKTtcbiAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQobGluZUxheWVyKTtcbiAgICAgICAgbm9kZVdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZUxheWVyKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY3Vyc2UgdGhyb3VnaCBjaGlsZHJlbiBub2Rlc1xuICAgICAgY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBsZXQgbm9kZUNlbGw7XG5cbiAgICAgICAgaWYgKGlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgIG5vZGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgbm9kZUNlbGwuc2V0QXR0cmlidXRlKCdjb2xzcGFuJywgMik7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZUxheWVyLmFwcGVuZENoaWxkKG5vZGVDZWxsKTtcbiAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeShub2RlQ2VsbCwgY2hpbGQsIGxldmVsICsgMSwgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIF9jbGlja0NoYXJ0KGV2ZW50KSB7XG4gICAgbGV0IGNsb3Nlc3ROb2RlID0gdGhpcy5fY2xvc2VzdChldmVudC50YXJnZXQsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGUnKTtcbiAgICB9KTtcblxuICAgIGlmICghY2xvc2VzdE5vZGUgJiYgdGhpcy5xdWVyeVNlbGVjdG9yKCcubm9kZS5mb2N1c2VkJykpIHtcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvcignLm5vZGUuZm9jdXNlZCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQnKTtcbiAgICB9XG4gIH1cbiAgX2xvb3BDaGFydChjaGFydCkge1xuICAgIGxldCBzdWJPYmogPSB7ICdpZCc6IGNoYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5ub2RlJykuaWQgfTtcblxuICAgIGlmIChjaGFydC5jaGlsZHJlblszXSkge1xuICAgICAgQXJyYXkuZnJvbShjaGFydC5jaGlsZHJlblszXS5jaGlsZHJlbikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhpcy5fbG9vcENoYXJ0KGVsLmZpcnN0Q2hpbGQpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc3ViT2JqO1xuICB9XG4gIGdldEhpZXJhcmNoeSgpIHtcbiAgICBpZiAoIXRoaXMucXVlcnlTZWxlY3RvcignLm5vZGUnKS5pZCkge1xuICAgICAgcmV0dXJuICdFcnJvcjogTm9kZXMgb2Ygb3JnaGNhcnQgdG8gYmUgZXhwb3J0ZWQgbXVzdCBoYXZlIGlkIGF0dHJpYnV0ZSEnO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbG9vcENoYXJ0KHRoaXMucXVlcnlTZWxlY3RvcigndGFibGUnKSk7XG4gIH1cbiAgX29uUGFuU3RhcnQoZXZlbnQpIHtcbiAgICBsZXQgY2hhcnQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgaWYgKHRoaXMuX2Nsb3Nlc3QoZXZlbnQudGFyZ2V0LCAoZWwpID0+IGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vZGUnKSkgfHxcbiAgICAgIChldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkpIHtcbiAgICAgIGNoYXJ0LmRhdGFzZXQucGFubmluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjaGFydC5zdHlsZS5jdXJzb3IgPSAnbW92ZSc7XG4gICAgY2hhcnQuZGF0YXNldC5wYW5uaW5nID0gdHJ1ZTtcblxuICAgIGxldCBsYXN0WCA9IDAsXG4gICAgICBsYXN0WSA9IDAsXG4gICAgICBsYXN0VGYgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjaGFydCkudHJhbnNmb3JtO1xuXG4gICAgaWYgKGxhc3RUZiAhPT0gJ25vbmUnKSB7XG4gICAgICBsZXQgdGVtcCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuXG4gICAgICBpZiAoIWxhc3RUZi5pbmNsdWRlcygnM2QnKSkge1xuICAgICAgICBsYXN0WCA9IE51bWJlci5wYXJzZUludCh0ZW1wWzRdLCAxMCk7XG4gICAgICAgIGxhc3RZID0gTnVtYmVyLnBhcnNlSW50KHRlbXBbNV0sIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RYID0gTnVtYmVyLnBhcnNlSW50KHRlbXBbMTJdLCAxMCk7XG4gICAgICAgIGxhc3RZID0gTnVtYmVyLnBhcnNlSW50KHRlbXBbMTNdLCAxMCk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBzdGFydFggPSAwLFxuICAgICAgc3RhcnRZID0gMDtcblxuICAgIGlmICghZXZlbnQudGFyZ2V0VG91Y2hlcykgeyAvLyBwYW4gb24gZGVza3RvcFxuICAgICAgc3RhcnRYID0gZXZlbnQucGFnZVggLSBsYXN0WDtcbiAgICAgIHN0YXJ0WSA9IGV2ZW50LnBhZ2VZIC0gbGFzdFk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgc3RhcnRYID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGxhc3RYO1xuICAgICAgc3RhcnRZID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIGxhc3RZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNoYXJ0LmRhdGFzZXQucGFuU3RhcnQgPSBKU09OLnN0cmluZ2lmeSh7ICdzdGFydFgnOiBzdGFydFgsICdzdGFydFknOiBzdGFydFkgfSk7XG4gICAgY2hhcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fb25QYW5uaW5nLmJpbmQodGhpcykpO1xuICAgIGNoYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uUGFubmluZy5iaW5kKHRoaXMpKTtcbiAgfVxuICBfb25QYW5uaW5nKGV2ZW50KSB7XG4gICAgbGV0IGNoYXJ0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgIGlmIChjaGFydC5kYXRhc2V0LnBhbm5pbmcgPT09ICdmYWxzZScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG5ld1ggPSAwLFxuICAgICAgbmV3WSA9IDAsXG4gICAgICBwYW5TdGFydCA9IEpTT04ucGFyc2UoY2hhcnQuZGF0YXNldC5wYW5TdGFydCksXG4gICAgICBzdGFydFggPSBwYW5TdGFydC5zdGFydFgsXG4gICAgICBzdGFydFkgPSBwYW5TdGFydC5zdGFydFk7XG5cbiAgICBpZiAoIWV2ZW50LnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICBuZXdYID0gZXZlbnQucGFnZVggLSBzdGFydFg7XG4gICAgICBuZXdZID0gZXZlbnQucGFnZVkgLSBzdGFydFk7XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgbmV3WCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBzdGFydFg7XG4gICAgICBuZXdZID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbGFzdFRmID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY2hhcnQpLnRyYW5zZm9ybTtcblxuICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gJ21hdHJpeCgxLCAwLCAwLCAxLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJyknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gJ21hdHJpeDNkKDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsICcgKyBuZXdYICsgJywgJyArIG5ld1kgKyAnLCAwLCAxKSc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcblxuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgbWF0cml4WzRdID0gbmV3WDtcbiAgICAgICAgbWF0cml4WzVdID0gbmV3WSArICcpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeFsxMl0gPSBuZXdYO1xuICAgICAgICBtYXRyaXhbMTNdID0gbmV3WTtcbiAgICAgIH1cbiAgICAgIGNoYXJ0LnN0eWxlLnRyYW5zZm9ybSA9IG1hdHJpeC5qb2luKCcsJyk7XG4gICAgfVxuICB9XG4gIF9vblBhbkVuZChldmVudCkge1xuICAgIGlmICh0aGlzLmRhdGFzZXQucGFubmluZyA9PT0gJ3RydWUnKSB7XG4gICAgICB0aGlzLmRhdGFzZXQucGFubmluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX29uUGFubmluZyk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX29uUGFubmluZyk7XG4gICAgfVxuICB9XG4gIF9zZXRDaGFydFNjYWxlKGNoYXJ0LCBuZXdTY2FsZSkge1xuICAgIGxldCBsYXN0VGYgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjaGFydCkudHJhbnNmb3JtO1xuXG4gICAgaWYgKGxhc3RUZiA9PT0gJ25vbmUnKSB7XG4gICAgICBjaGFydC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnKSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBtYXRyaXggPSBsYXN0VGYuc3BsaXQoJywnKTtcblxuICAgICAgaWYgKCFsYXN0VGYuaW5jbHVkZXMoJzNkJykpIHtcbiAgICAgICAgbWF0cml4WzBdID0gJ21hdHJpeCgnICsgbmV3U2NhbGU7XG4gICAgICAgIG1hdHJpeFszXSA9IG5ld1NjYWxlO1xuICAgICAgICBjaGFydC5zdHlsZS50cmFuc2Zvcm0gPSBsYXN0VGYgKyAnIHNjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhcnQuc3R5bGUudHJhbnNmb3JtID0gbGFzdFRmICsgJyBzY2FsZTNkKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJywgMSknO1xuICAgICAgfVxuICAgIH1cbiAgICBjaGFydC5kYXRhc2V0LnNjYWxlID0gbmV3U2NhbGU7XG4gIH1cbiAgX29uV2hlZWxpbmcoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IG5ld1NjYWxlID0gZXZlbnQuZGVsdGFZID4gMCA/IDAuOCA6IDEuMjtcblxuICAgIHRoaXMuX3NldENoYXJ0U2NhbGUodGhpcywgbmV3U2NhbGUpO1xuICB9XG4gIF9nZXRQaW5jaERpc3QoZXZlbnQpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KChldmVudC50b3VjaGVzWzBdLmNsaWVudFggLSBldmVudC50b3VjaGVzWzFdLmNsaWVudFgpICpcbiAgICAgIChldmVudC50b3VjaGVzWzBdLmNsaWVudFggLSBldmVudC50b3VjaGVzWzFdLmNsaWVudFgpICtcbiAgICAgIChldmVudC50b3VjaGVzWzBdLmNsaWVudFkgLSBldmVudC50b3VjaGVzWzFdLmNsaWVudFkpICpcbiAgICAgIChldmVudC50b3VjaGVzWzBdLmNsaWVudFkgLSBldmVudC50b3VjaGVzWzFdLmNsaWVudFkpKTtcbiAgfVxuICBfb25Ub3VjaFN0YXJ0KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgIGxldCBkaXN0ID0gdGhpcy5fZ2V0UGluY2hEaXN0KGV2ZW50KTtcblxuICAgICAgdGhpcy5kYXRhc2V0LnBpbmNoaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGF0YXNldC5waW5jaERpc3RTdGFydCA9IGRpc3Q7XG4gICAgfVxuICB9XG4gIF9vblRvdWNoTW92ZShldmVudCkge1xuICAgIGlmICh0aGlzLmRhdGFzZXQucGluY2hpbmcpIHtcbiAgICAgIGxldCBkaXN0ID0gdGhpcy5fZ2V0UGluY2hEaXN0KGV2ZW50KTtcblxuICAgICAgdGhpcy5kYXRhc2V0LnBpbmNoRGlzdEVuZCA9IGRpc3Q7XG4gICAgfVxuICB9XG4gIF9vblRvdWNoRW5kKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZGF0YXNldC5waW5jaGluZykge1xuICAgICAgdGhpcy5kYXRhc2V0LnBpbmNoaW5nID0gZmFsc2U7XG4gICAgICBsZXQgZGlmZiA9IHRoaXMuZGF0YXNldC5waW5jaERpc3RFbmQgLSB0aGlzLmRhdGFzZXQucGluY2hEaXN0U3RhcnQ7XG5cbiAgICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICB0aGlzLl9zZXRDaGFydFNjYWxlKHRoaXMsIDEpO1xuICAgICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgICAgICB0aGlzLl9zZXRDaGFydFNjYWxlKHRoaXMsIC0xKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnb3JnLWNoYXJ0JywgT3JnQ2hhcnQpO1xuIl19
